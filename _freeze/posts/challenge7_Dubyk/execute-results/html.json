{
  "hash": "f6aaef615d1682e57775db655d36023b",
  "result": {
    "markdown": "---\ntitle: \"Challenge 7\"\nauthor: \"Mariia Dubyk\"\ndescription: \"Visualizing Multiple Dimensions\"\ndate: \"11/29/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - abc_poll\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\n  - abc_poll ⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabc_poll<-read.csv(\"_data/abc_poll_2021.csv\")\nlibrary(summarytools)\nview(dfSummary(abc_poll))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in nchar(xx): invalid multibyte string, element 4\n```\n:::\n:::\n\n\n### Briefly describe the data\nThe dataframe shows responses to the questionnaire. The respondents are adults (age 18-91) from the USA. \n- We can see some demographic data like education, income, age, state, etc (column 4-17). \n- Responses to other questions (about views or experience) are in columns 18-28. Column 2  identifies language of the respondent. \n\nDataset contains of 527 observations and 31 variables. \n\n## Tidy Data (as needed)\n\n- rename and delete certain columns\n- simplify information in some columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Rename and delete certain columns\nabc_poll<-rename(abc_poll, language = xspanish, age =  ppage, education5 = ppeduc5, education = ppeducat, gender = ppgender, ethnicity = ppethm, household_size = pphhsize, income = ppinc7, marital_status = ppmarit5, region = ppreg4, rent = pprent, state = ppstaten, work = PPWORKA, employment = ppemploy)\nabc_poll <- select(abc_poll, !contains(\"complete_status\"))\n\n#Simplify information in some columns\nabc_poll<-abc_poll %>%\n  mutate(education5=case_when(education5 == \"Bachelor’s degree\" ~ \"bachelor\",\n                              education5 == \"High school graduate (high school diploma or the equivalent GED)\" ~ \"hight_school\",\n                              education5 == \"Master’s degree or above\" ~ \"master\",\n                              education5 == \"No high school diploma or GED\" ~ \"no_high_school\",\n                              education5 == \"Some college or Associate degree\" ~ \"college/associate\"))\n\nabc_poll<-abc_poll %>%\n  mutate(education=case_when(education == \"Bachelors degree or higher\" ~ \"bachelor\",\n                              education == \"High school\" ~ \"high_school\",\n                              education == \"Less than high school\" ~ \"less_high_school\",\n                              education == \"Some college\" ~ \"college\"))\n\nabc_poll <- abc_poll%>%\n  mutate(ethnicity = str_remove_all(ethnicity, c(\", Non-Hispanic\")))\nabc_poll <- abc_poll%>%\n  mutate(household_size = str_replace_all (household_size, c(\"6 or more\" = \"6<\")))\nabc_poll <- abc_poll%>%\n  mutate(income=case_when(income == \"Less than $10,000\" ~ \"1\",\n                             income == \"$10,000 to $24,999\" ~ \"2\",\n                             income == \"$25,000 to $49,999\" ~ \"3\",\n                             income == \"$50,000 to $74,999\" ~ \"4\",\n                             income == \"$75,000 to $99,999\" ~ \"5\",\n                             income == \"$100,000 to $149,999\" ~ \"6\",\n                             income == \"$150,000 or more\" ~ \"7\"))\n\nabc_poll <- abc_poll%>%\n  mutate(marital_status = str_replace_all(marital_status, c(\" \" =\"_\", \"m\" = \"M\")))\nabc_poll<-abc_poll %>%\n  mutate(QPID = fct_recode(QPID, \"dem\" = \"A Democrat\",\n                                \"rep\" = \"A Republican\",\n                                \"ind\" = \"An Independent\",\n                                \"skipped\" = \"Skipped\",\n                              \"other\" = \"Something else\")) %>%\n  mutate(QPID = fct_relevel(QPID, \"dem\", \"ind\", \"rep\",\"other\", \"skipped\"))\n```\n:::\n\n\n## Visualization with Multiple Dimensions\nI decided to make simple bar chart to show answer to one of the questions and add gender as another dimension. It will show if there are differences between two groups. I am not sure if it is multiple dimensions because the visualization is very simple. But it shows number of responses, type of response and gender.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(abc_poll, aes(Q2, fill=gender)) + geom_bar() + ggtitle(\"Responses to Question2 by gender\") + ggeasy::easy_center_title() + xlab(\"Question2\") + ylab(\"Responses\") + theme(axis.text = element_text(size = 7)) + labs(fill = \"Gender\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in loadNamespace(x): there is no package called 'ggeasy'\n```\n:::\n:::\n\nAs a second visualization I chose violin chart to show distribution of age variable for groups who answered Q2 differently.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(hrbrthemes)\nlibrary(viridis)\n\n\nggplot(abc_poll, aes(x=Q2, y=age, fill=Q2, color=Q2)) +\n    geom_violin(width=0.35, size=1) +\n    scale_fill_viridis(discrete=TRUE) +\n    scale_color_viridis(discrete=TRUE) +\n    coord_flip() + xlab(\"\") +\n    ylab(\"Age\") + ggtitle (\"Distribution of age variable and Question2 responses\")\n```\n\n::: {.cell-output-display}\n![](challenge7_Dubyk_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge7_Dubyk_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}