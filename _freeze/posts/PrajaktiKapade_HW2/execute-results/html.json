{
  "hash": "59dd11bba52257cc74bf3e2746733263",
  "result": {
    "markdown": "---\ntitle: \"HW2\"\nauthor: \"Prajakti Kapade\"\ndescription: \"Homework 2\"\ndate: \"10/26/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\n\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggplot2' was built under R version 4.2.2\n```\n:::\n:::\n\n\n#Read Dataset\nWe will load the hotel_bookings dataset.\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data <- read_csv('_data/hotel_bookings.csv')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in read_csv(\"_data/hotel_bookings.csv\"): could not find function \"read_csv\"\n```\n:::\n\n```{.r .cell-code}\nhotel_data\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'hotel_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(hotel_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in is.data.frame(x): object 'hotel_data' not found\n```\n:::\n:::\n\n\nThe dataset contains 32 columns and 119,390 observations. The columns are shown above. \nSome of the categorical columns are : hotel, deposit_type, company, customer_type\nThe columns related to time are : \"lead_time\" ,\"arrival_date_year\" , \"arrival_date_month\"     \"arrival_date_week_number\" ,\"arrival_date_day_of_month\" ,\"stays_in_weekend_nights\", \"stays_in_week_nights\"\nThe target column according to this dataset is : \"is_cancelled\"\n\n#Summary of the dataset\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(hotel_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in summary(hotel_data): object 'hotel_data' not found\n```\n:::\n:::\n\nAs, we can see this dataset is well-defined in terms of rows and columns, thus, they need no pivoting.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(hotel_data$hotel)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in unique(hotel_data$hotel): object 'hotel_data' not found\n```\n:::\n\n```{.r .cell-code}\nunique(hotel_data$deposit_type)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in unique(hotel_data$deposit_type): object 'hotel_data' not found\n```\n:::\n\n```{.r .cell-code}\nunique(hotel_data$customer_type)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in unique(hotel_data$customer_type): object 'hotel_data' not found\n```\n:::\n:::\n\nThere are two types of hotels : \"Resort Hotel\", \"City Hotel\", three types of Deposits : \"No Deposit\" ,\"Refundable\" ,\"Non Refund\", and four types of customers in this dataset : \"Transient\",\"Contract\",\"Transient-Party\",\"Group\".\n\n#Dataset Cleaning\nUsing the code below to see the null values\n\n::: {.cell}\n\n```{.r .cell-code}\nsapply(hotel_data, function(x) sum(is.na(x)))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in lapply(X = X, FUN = FUN, ...): object 'hotel_data' not found\n```\n:::\n:::\n\n\nAs, we just have null values in one column i.e. Children. We can substitue those 4 values with the values in babies columns, as they mean the same or are giving same context.\n\n::: {.cell}\n\n```{.r .cell-code}\nn <- length(hotel_data$children)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'hotel_data' not found\n```\n:::\n\n```{.r .cell-code}\nfor (i in 1:n) {\n  if (is.na(hotel_data$children[i]))\n    hotel_data$children[i] <- hotel_data$babies[i]\n}\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in 1:n: NA/NaN argument\n```\n:::\n:::\n\n\nNow, we will look at one column which does not clearly define itself : \"adr\". It should be \"average daily rate\". According to the summary, the maximum value is very high while the mean lies in 100s. We will look at how many records are actually in the high range.\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data%>%\n  filter(adr>2000)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(., adr > 2000): object 'hotel_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data%>%\n  filter(adr>1000)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(., adr > 1000): object 'hotel_data' not found\n```\n:::\n:::\n\nWe can see, there is only one record which can be an outlier, so we can replace the value by mean of the column \"adr\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data = hotel_data%>%\n  mutate(adr = replace(adr, adr>1000, mean(adr)))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., adr = replace(adr, adr > 1000, mean(adr))): object 'hotel_data' not found\n```\n:::\n:::\n\n\n#Dataset Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = hotel_data, aes(x = hotel)) +\n  geom_bar(stat = \"count\",fill='lightblue') +\n  labs(title = \"Booking by Hotel type\",\n       x = \"Hotel type\",\n       y = \"No. of bookings\") \n```\n\n::: {.cell-output .cell-output-error}\n```\nError in ggplot(data = hotel_data, aes(x = hotel)): object 'hotel_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#plot distribution of deposit type\nhotel_data %>% select(hotel, deposit_type) %>% \n                group_by( hotel, deposit_type) %>% \n                summarise(n = n()) %>% \n                ggplot(aes(reorder(deposit_type, n), n, fill = hotel)) + \n                geom_bar(stat = \"identity\", position = position_dodge()) + xlab(\"\") + \n                ylab(\"# of bookings\") + labs(fill = \"Hotel type\") \n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., hotel, deposit_type): object 'hotel_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#plot distribution of deposit type\nhotel_data %>% select(hotel, customer_type) %>% \n                group_by( hotel, customer_type) %>% \n                summarise(n = n()) %>% \n                ggplot(aes(reorder(customer_type, n), n, fill = hotel)) + \n                geom_bar(stat = \"identity\", position = position_dodge()) + xlab(\"\") + \n                ylab(\"# of bookings\") + labs(fill = \"Hotel type\") \n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., hotel, customer_type): object 'hotel_data' not found\n```\n:::\n:::\n\nWe can summarize the following from the plots above:\n1. The number of bookings for Resorts are half the number of bookings for the City Hotels.\n2. Majority of the City Hotels have No Deposit for the booking, while there are 0 City Hotels asking for Refundable Deposits.\n3. Majority of customers booking the City Hotels are Transient, followed by Transient-Party.\n\nNow, we will look at the distribution of hotels per country\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data%>%\n  group_by(country)%>%\n  summarise(num=n())%>%\n  arrange(desc(num))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in group_by(., country): object 'hotel_data' not found\n```\n:::\n:::\n\n\nAs, \"is_canceled\" is our target variable, let us see the cancelations per country.\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data %>% \n  select(country, is_canceled) %>% \n  group_by(country) %>% \n  summarise_if(is.numeric, sum, na.rm = TRUE) %>% \n  arrange(desc(is_canceled)) %>% \n  head(n=10)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., country, is_canceled): object 'hotel_data' not found\n```\n:::\n:::\n\n\nThe maximum bookings are made in : PRT,GBR,FRA,ESP,DEU\nThe maximum cancelations are made in : PRT,GBR,ESP,FRA,ITA\n\nAs seen, FRA has higher bookings than ESP, and the cancelations are less as compared the ESP. Thus, the hit rate i.e. the probability for booking to happen is high in FRA.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data %>% \n  select(country, stays_in_week_nights) %>% \n  group_by(country) %>% \n  summarise_if(is.numeric, mean, na.rm = TRUE) %>% \n  arrange(desc(stays_in_week_nights)) %>% \n  head(n=10)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., country, stays_in_week_nights): object 'hotel_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhotel_data %>% \n  select(country, stays_in_weekend_nights) %>% \n  group_by(country) %>% \n  summarise_if(is.numeric, mean, na.rm = TRUE) %>% \n  arrange(desc(stays_in_weekend_nights)) %>% \n  head(n=10)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., country, stays_in_weekend_nights): object 'hotel_data' not found\n```\n:::\n:::\n\nAlso, we can see the stay in week nights and weekend nights follow almost similar pattern in terms of the countries, with FRO and SEN being the top 2.\n\n\nResearch Question: \n1. Does the cancellation of booking depend upon the dates of stays?\n2. Do the number of adults and number of children affect the stay length?\n3. Does the deposit type have any impact on the cancellation rate?\n4. Does parking space affect the number of bookings made in the hotel?\n5. How does the market segment affect the bookings?\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}