{
  "hash": "51199ed9d8f82922d701a4944e04f59e",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Mariia Dubyk\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"11/19/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - debt\n\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least one graph including time (evolution)\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n5)  Create at least one graph depicting part-whole or flow relationships\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n  - debt  ‚≠ê\n\n\n::: {.cell}\n\n```{.r .cell-code}\nDebt_orig <- readxl::read_xlsx(\"_data/debt_in_trillions.xlsx\")\n```\n:::\n\n\n### Briefly describe the data\nThe dataset gives information about the amount of different types of dept from 2001 to 2021. We have information for each quarter for these years. We can see such types as Mortgage, HE Revolving, Auto Loan, Credit Card, Student Loan and other. Table also shows total amount. The dataset contains 74 cases and 8 variables.\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(Debt_orig)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Year and Quarter      Mortgage       HE Revolving      Auto Loan     \n Length:74          Min.   : 4.942   Min.   :0.2420   Min.   :0.6220  \n Class :character   1st Qu.: 8.036   1st Qu.:0.4275   1st Qu.:0.7430  \n Mode  :character   Median : 8.412   Median :0.5165   Median :0.8145  \n                    Mean   : 8.274   Mean   :0.5161   Mean   :0.9309  \n                    3rd Qu.: 9.047   3rd Qu.:0.6172   3rd Qu.:1.1515  \n                    Max.   :10.442   Max.   :0.7140   Max.   :1.4150  \n  Credit Card      Student Loan        Other            Total       \n Min.   :0.6590   Min.   :0.2407   Min.   :0.2960   Min.   : 7.231  \n 1st Qu.:0.6966   1st Qu.:0.5333   1st Qu.:0.3414   1st Qu.:11.311  \n Median :0.7375   Median :0.9088   Median :0.3921   Median :11.852  \n Mean   :0.7565   Mean   :0.9189   Mean   :0.3831   Mean   :11.779  \n 3rd Qu.:0.8165   3rd Qu.:1.3022   3rd Qu.:0.4154   3rd Qu.:12.674  \n Max.   :0.9270   Max.   :1.5840   Max.   :0.4860   Max.   :14.957  \n```\n:::\n:::\n\n## Tidy Data (as needed)\n\nWe need to remove column \"Total\", pivot the data and change variable with information about the date.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt <- select(Debt_orig, !contains(\"Total\"))\ndebt <- debt %>%\n  pivot_longer(cols = Mortgage:Other, names_to = \"debt type\", values_to = \"amount\")\ndebt <- debt %>%\n  mutate(`Year and Quarter` = str_replace_all(`Year and Quarter`, c(\"20\" = \"2020\", \"21\" = \"2021\", \"03\" = \"2003\", \"04\" = \"2004\", \"05\" = \"2005\", \"06\" = \"2006\", \"07\" = \"2007\", \"08\" = \"2008\", \"09\" = \"2009\", \"10\" = \"2010\", \"11\" = \"2011\", \"12\" = \"2012\", \"13\" = \"2013\", \"14\" = \"2014\", \"15\" = \"2015\", \"16\" = \"2016\", \"17\" = \"2017\", \"18\" = \"2018\", \"19\" = \"2019\")))\ndebt <- debt %>%\n  mutate(`Year and Quarter` = str_replace_all(`Year and Quarter`, c(\"Q1\" = \"1\", \"Q2\" = \"2\", \"Q3\" = \"3\", \"Q4\" = \"4\")))\ndebt <- debt %>%\n  mutate(`Year and Quarter` = str_replace_all(`Year and Quarter`, c(\":\" = \"-\")))\n\nlibrary(date)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in library(date): there is no package called 'date'\n```\n:::\n\n```{.r .cell-code}\nlibrary(zoo)\ndebt$`Year and Quarter` <- as.yearqtr(debt$`Year and Quarter`, format = \"%Y-%q\")\nclass(debt$`Year and Quarter`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"yearqtr\"\n```\n:::\n:::\n\n\n## Time Dependent Visualization\n(1) As first visualization I chose line graph. We can see difference between debt types and changes from 2003 to 2021.  It is very common choice for time dependent visualization. I think it is very easy to perceive information about dynamic in time. \n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(debt, aes(x = `Year and Quarter`, y = `amount`, color = `debt type`)) +\n  geom_line() +\n  labs(title = \"Debt amount 2003-2021\",\n       x = \"Year and Quarter\",\n       y = \"Amount in trillions\") + theme_minimal()\n```\n\n::: {.cell-output-display}\n![](challenge6_Dubyk_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Visualizing Part-Whole Relationships\n(2) I chose treemap chart to visualize comparison between the amount of debt types. I visualize mean for each type for 2001-2021. I am not sure that this is the proper way to work with such data. My aim was to show the difference between all types for these years.\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt <- debt %>%\n  group_by(`debt type`) %>%\n  select(amount, `debt type` ) %>%\n  summarize_all(mean, na.rm = TRUE)\nlibrary(treemap)\ntreemap(debt, index=\"debt type\", vSize=\"amount\", type=\"index\", title=\"Amount of debt by type 2003-2021\")\n```\n\n::: {.cell-output-display}\n![](challenge6_Dubyk_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge6_Dubyk_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}