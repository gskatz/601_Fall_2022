{
  "hash": "d618fdf18317f813917c5ec6e46951b9",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2\"\nauthor: \"Dane Shelton\"\ndesription: \"Data wrangling: using group() and summarise()\"\ndate: \"09/28/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - shelton\n  - hotel bookings\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\n### Tasks:\n\n1.) Read in dataset and describe the data, where did it come from? What could it be used for? What are the variables and for how many observations are complete with all values?\n\n2.) Use group_by() and other functions to find interesting statistics within groupings.\n\n## Task 1: Reading in Hotel Bookings Data\n\nRead in one (or more) of the following data sets, available in the `posts/_data` folder, using the correct R package and command.\n\n-   hotel_bookings.csv ⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhotels <- read_csv(\"_data/hotel_bookings.csv\")\n\n#Checking for missing values\nlength(which(is.na(hotels)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 4\n```\n:::\n\n```{.r .cell-code}\n#List the 4 Missing Values\nwhich(is.na(hotels))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1234501 1234568 1234580 1235061\n```\n:::\n\n```{.r .cell-code}\n#Remove the observations with missing values\nhotels <- na.omit(hotels)\n```\n:::\n\n\nI used dplyr package `readr` to read in the .csv file via the `read_csv` function. I checked for missing values, and once realizing that only 4 of over 100,000 bookings had missing values, I simply omitted the observations with missing values. \n\n## Task 2: Provide a Description of the Hotel Bookings Data\n\n### Describing the Data using summarytools\n\n::: {.cell}\n\n```{.r .cell-code}\n# summarytools::dfSummary(hotels)\n\n# Finding Earlier and Latest Arrival Dates\n\n# distinct(hotels, arrival_date_year, arrival_date_month)\n```\n:::\n\n\nThe data provides the entirety of a hotels booking records from October 2014 to September 2017. It documents arrivals from July 2015 to August 2017. After removing the 4 hotel bookings that were incomplete, we're left with 119386 observations with values for 32 variables both numeric and character in type. \n\nObservations contain standard booking information that would be collected by a hotel from guests: Arrival/Departure dates, Hotel types, Room types, Guests (and children), Previous stays, Parking, Travel Agent, Meals. \n\nMore interestingly, the data further describes guests using their Origin country, Stay Type, Company, and Market sector (of booking). \n\nIn the next section, we'll use `group_by()`, `select()`, `filter()`, and `summarise()` to further explore the data .\n\n## Provide Grouped Summary Statistics\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Variables of Interest: country, market_segment, children, hotel\n\n# Grouping\nhotels <- ungroup(hotels)\n\n# Grouping by Country\ncountry_data <-group_by(hotels, country) %>%\n  summarize(obs=n())%>%\n    arrange(desc(obs))\n\n# Viewing Average Children by Country for Countries with more than 1000 obs\n\navg_children <- select(hotels, country, children)%>%\n                  group_by(country)%>%\n                    summarize(n=n(),children=sum(children))%>%\n                      filter(n > 1000)%>%\n                      mutate(prop = children/n)%>%\n                      arrange(desc(prop))\n\n\n# Failed attempt at determining whether countries had a preference for city hotel vs resort hotel\n\n hotel_type <- select(hotels, country, hotel)%>%\n                  group_by(country, hotel)%>%\n                    summarize(count=n())%>%\n                      pivot_wider(names_from=hotel, values_from=count)\n                  \n \n \n\n\n#Grouping by Country and Market Segment (Where They Booked From)\n \ncountry_mkt <- hotels %>% \n                  group_by(country, market_segment)%>%\n                    summarize(n=n(), country, market_segment)%>%\n                        distinct()%>%\n                          pivot_wider(names_from=market_segment, values_from=n)\n                            \n\n# filter(country_mkt, country == 'USA')\n\n# arrange(country_mkt, desc(Corporate))\n\n# arrange(country_mkt, desc(Groups))\n\n# arrange(country_mkt, desc(\"Online TA\"))\n\n# arrange(country_mkt, desc(Complementary))\n```\n:::\n\n\n### Explain and Interpret\n\nUsing the mentioned functions allowed us to extract important details about guest demographics and  provided enough information for us to infer the hotel group is in Portugal. After viewing the relationship between country and children, we can see that for countries with over 1000 bookings, Portugal is not in the top ten of mean child guests; is our hotel group a business brand or a family friendly destination?\n\nAfter comparing bookings of city hotels and resort hotels, we conclude that the majority of our observations are for city hotels. We further investigated the booking counts of each market sector by country and can conclude that while the hotel wouldn't be described as a family destination, it's not a high-end \"business\" hotel either.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}