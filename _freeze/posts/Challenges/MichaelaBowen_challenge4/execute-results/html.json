{
  "hash": "5479186113fcc00bd99510d058ccabf9",
  "result": {
    "markdown": "---\ntitle: \"Challenge 4\"\nauthor: \"Michaela Bowen\"\ndesription: \"More data wrangling: pivoting\"\ndate: \"10/06/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_4\n  - abc_poll\n  - eggs\n  - fed_rates\n  - hotel_bookings\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nIn today's Challenge I have attempted to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  identify variables that need to be mutated\n4)  mutate variables and sanity check all mutations\n\n## Read in data\n\nToday I am reading in:\n\n-   abc_poll.csv ‚≠ê\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nabc_poll <- read_csv(\"_data/abc_poll_2021.csv\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: '_data/abc_poll_2021.csv' does not exist in current working directory ('C:/Users/micha/OneDrive/Documents/Graduate School/DACSS 601/601_Fall_2022/posts/Challenges').\n```\n:::\n:::\n\n\n### Briefly describe the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(summarytools)\n##dataframe summary\nprint(summarytools::dfSummary(abc_poll,\n                        varnumbers = FALSE,\n                        plain.ascii  = FALSE, \n                        style        = \"grid\", \n                        graph.magnif = 0.70, \n                        valid.col    = FALSE),\n      method = 'render',\n      table.classes = 'table-condensed')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in summarytools::dfSummary(abc_poll, varnumbers = FALSE, plain.ascii = FALSE, : object 'abc_poll' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n##Identify Participant Demographic Variables\nabc_poll%>%\n  select(starts_with(\"pp\"))%>%\n  colnames()\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., starts_with(\"pp\")): object 'abc_poll' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n##Identify Political Question Variables\nabc_poll%>%\n  select(starts_with(\"Q\"))%>%\n  colnames()\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., starts_with(\"Q\")): object 'abc_poll' not found\n```\n:::\n:::\n\n\nThe ABC Poll Data is survey data from ABC new political polls. This data looks to be from 2021. After investigating the data we can see a few things:\n\n-   There are demographic variables, such as education level, household size, income level, among other identifying information. We can also see that each of the 527 respondents have a unique \"id\", so there are no double respondents.\n\n-   There are 10 questions that ask political sentiments (Q_1 (a-f) - Q_5) as well as one asking political affiliation.\n\n## Tidy Data\n\n-   There are a few ways I would like to tidy this data while reading it in\n\n1.  Rename columns: I will be renaming the \"ID\", \"complete_status\",and \"pp_educat\"(redundant information) columns to \"delete\" in order to remove those columns seamlessly. Other demographic columns will be renamed according to the information they contain.\n2.  Here is how I will mutate the following columns\n - Ethnicity column responses all, but Hispanic, contain \"non-Hispanic\" so it is redundant and lengthy to include that in each response\n - Political Identity column needs to be amended from including \"An\" and \"A\" to simply the party name. The \"skipped\" response also will need to be change to NA to signify missing data rather than classifying \"skipped\" as a response.\n - Education column responses must be mutated to exclude the apostrophe in the Bachelor's and Master's columns as they are producing \"NA\" where we don't want that\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabc_poll_tidy <- read_csv(\"_data/abc_poll_2021.csv\",\n                         skip = 1,\n                         col_names =                           c(\"delete\",\"language\",\"delete\",\"pp_age\",\"pp_education\",\"delete\",\"pp_gender\",\"pp_ethnicity\", \"pp_house_size\",\"pp_incomelvl\",\"pp_marital_status\",\"pp_metrocat\",\"pp_region\",\"pp_rent\",\"pp_state\",\"pp_working_status\",\"pp_employment\",\"q_1_a\",\"q_1_b\",\"q_1_c\",\"q_1_d\",\"q_1_e\",\"q_1_f\",\"q_2\",\"q_3\",\"q_4\",\"q_5\",\"pp_partyid\",\"pp_age_range\",\"pp_can_contact\",\"weights\"))%>%\n  select(!contains(\"delete\"))%>%\n  #removing redundant \"Non-Hispanic\" identification from ethnicity column\n  mutate(pp_ethnicity = str_remove(pp_ethnicity, \", Non-Hispanic\"))%>%\n  #mutating political identity column to remove \"An\" and \"A\"\n  mutate(\n    pp_partyid = str_remove(pp_partyid, \"A[n]*\"),\n    pp_partyid = na_if(pp_partyid, \"Skipped\")\n  )%>%\n  mutate(\n    pp_education = str_remove(pp_education, \"\\x92\")\n  )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: '_data/abc_poll_2021.csv' does not exist in current working directory ('C:/Users/micha/OneDrive/Documents/Graduate School/DACSS 601/601_Fall_2022/posts/Challenges').\n```\n:::\n\n```{.r .cell-code}\n#Sanity Checks\nprop.table(table(abc_poll_tidy$pp_partyid))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in table(abc_poll_tidy$pp_partyid): object 'abc_poll_tidy' not found\n```\n:::\n\n```{.r .cell-code}\nprop.table(table(abc_poll_tidy$pp_ethnicity))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in table(abc_poll_tidy$pp_ethnicity): object 'abc_poll_tidy' not found\n```\n:::\n\n```{.r .cell-code}\nprop.table(table(abc_poll_tidy$pp_education))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in table(abc_poll_tidy$pp_education): object 'abc_poll_tidy' not found\n```\n:::\n:::\n\n\n\n## Identify variables that need to be mutated\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, are all time variables correctly coded as dates? Are all string variables reduced and cleaned to sensible categories? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nFor most streamline analysis there are several columns that must mutated. \n`pp_incomelvl`:\n - Change from numeric data, to categorical data giving each income bracket a category\n\n\nDocument your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabc_poll_tidy <- abc_poll_tidy%>%\n  #categorizing income level\n  mutate(pp_incomelvl = case_when(\n    pp_incomelvl == \"Less than $10,000\" ~ \"Income Level 1\",\n    pp_incomelvl == \"$10,000 to $24,999\" ~ \"Income Level 2\",\n    pp_incomelvl == \"$25,000 to $49,999\" ~ \"Income Level 3\",\n    pp_incomelvl == \"$50,000 to $74,999\" ~ \"Income Level 4\",\n    pp_incomelvl == \"$75,000 to $99,999\" ~ \"Income Level 5\",\n    pp_incomelvl == \"$100,000 to $149,999\" ~ \"Income Level 6\",\n    pp_incomelvl == \"$150,000 or more\" ~ \"Income Level 7\"\n  ))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., pp_incomelvl = case_when(pp_incomelvl == \"Less than $10,000\" ~ : object 'abc_poll_tidy' not found\n```\n:::\n:::\n\n\nAny additional comments?\nHere is the final dataframe\n\n::: {.cell}\n\n```{.r .cell-code}\nprint(summarytools::dfSummary(abc_poll,\n                        varnumbers = FALSE,\n                        plain.ascii  = FALSE, \n                        style        = \"grid\", \n                        graph.magnif = 0.70, \n                        valid.col    = FALSE),\n      method = 'render',\n      table.classes = 'table-condensed')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in summarytools::dfSummary(abc_poll, varnumbers = FALSE, plain.ascii = FALSE, : object 'abc_poll' not found\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}