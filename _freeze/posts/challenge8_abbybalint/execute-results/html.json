{
  "hash": "f312065cdd0ec48989ec45bb39965b90",
  "result": {
    "markdown": "---\ntitle: \"Challenge 8 - Abby Balint\"\nauthor: \"Abby Balint\"\ndescription: \"Joining Data\"\ndate: \"11/6/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_8\n  - abby_balint\n  - faostat\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\nReading in the FAO data sets - \n\n::: {.cell}\n\n```{.r .cell-code}\ncodes <- read_csv(\"_data/FAOSTAT_country_groups.csv\")\ncattle <- read_csv(\"_data/FAOSTAT_cattle_dairy.csv\")\n```\n:::\n\n\n### Briefly describe the data\n\nThe main dataset I am working with here is the FAO Stat Cattle dataset. This is publicly available food and agriculture data for over 245 countries in the world. This file in particular contains information about cow milk, with variables units sold and value of the product. The data begins in the 1960s and goes through 2018. This file contains over 36,000 rows of information. \n\nThe second file I will be joining in is a codebook that groups up the countries so that we don't have to look at the data at such a granular, individual country level. My goal is to join in the country group variable to be able to perform analysis on these groups within the cattle/dairy dataset.\n\n\n## Tidy Data (as needed)\n\nAll rows have an \"Area code\" assigned to the country, and that is what I will be using to join in the country group variable. However, it is called \"Country Code\" in the country file, so I am renaming the variable to \"Country Code\" here as well. \n\n::: {.cell}\n\n```{.r .cell-code}\ncattlenew <- rename (cattle, \"Country Code\"= \"Area Code\" )\nhead(cattlenew)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  Domai…¹ Domain Count…² Area  Eleme…³ Element Item …⁴ Item  Year …⁵  Year Unit \n  <chr>   <chr>    <dbl> <chr>   <dbl> <chr>     <dbl> <chr>   <dbl> <dbl> <chr>\n1 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n2 QL      Lives…       2 Afgh…    5420 Yield       882 Milk…    1961  1961 hg/An\n3 QL      Lives…       2 Afgh…    5510 Produc…     882 Milk…    1961  1961 tonn…\n4 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1962  1962 Head \n5 QL      Lives…       2 Afgh…    5420 Yield       882 Milk…    1962  1962 hg/An\n6 QL      Lives…       2 Afgh…    5510 Produc…     882 Milk…    1962  1962 tonn…\n# … with 3 more variables: Value <dbl>, Flag <chr>, `Flag Description` <chr>,\n#   and abbreviated variable names ¹​`Domain Code`, ²​`Country Code`,\n#   ³​`Element Code`, ⁴​`Item Code`, ⁵​`Year Code`\n```\n:::\n:::\n\n\n\n## Join Data\n\nHere I am joining the two files with a left join based on Country Code.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncattlefinal <- left_join(cattlenew, codes, by = \"Country Code\" )\nhead(cattlefinal)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 20\n  Domai…¹ Domain Count…² Area  Eleme…³ Element Item …⁴ Item  Year …⁵  Year Unit \n  <chr>   <chr>    <dbl> <chr>   <dbl> <chr>     <dbl> <chr>   <dbl> <dbl> <chr>\n1 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n2 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n3 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n4 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n5 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n6 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n# … with 9 more variables: Value <dbl>, Flag <chr>, `Flag Description` <chr>,\n#   `Country Group Code` <dbl>, `Country Group` <chr>, Country <chr>,\n#   `M49 Code` <chr>, `ISO2 Code` <chr>, `ISO3 Code` <chr>, and abbreviated\n#   variable names ¹​`Domain Code`, ²​`Country Code`, ³​`Element Code`,\n#   ⁴​`Item Code`, ⁵​`Year Code`\n```\n:::\n:::\n\nNow that my data is joined, if I wanted to graph certain country groups I would now be able to, like in the below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncattlefinal %>%\n  filter(Year >= 2010) %>%\n  filter(`Flag Description` == \"Official data\") %>%\n  filter(`Country Group`==\"Central Asia\") %>%\n  filter(`Unit` == \"tonnes\") %>%\n  ggplot(aes(x=`Area`, y=`Value`)) + \n  geom_point(\n    color=\"purple\",\n    fill=\"#69b3a2\",\n    size=.5,\n    alpha=.5\n  )+\n  labs(title = \"Official Tonnes of Milk Produced in Central Asia from the Year 2010-2018\", x=\"Country\", y=\"Value of Milk\") +\n  scale_y_continuous(labels = function(x) format(x, scientific = FALSE)) \n```\n\n::: {.cell-output-display}\n![](challenge8_abbybalint_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge8_abbybalint_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}