{
  "hash": "ab19283ce29cd21a3984f732c5fc48dd",
  "result": {
    "markdown": "---\ntitle: \"Challenge 5 Instructions\"\nauthor: \"Matthew Norberg\"\ndescription: \"Introduction to Visualization\"\ndate: \"10/07/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_5\n  - air_bnb\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least two univariate visualizations\n   - try to make them \"publication\" ready\n   - Explain why you choose the specific graph type\n5)  Create at least one bivariate visualization\n   - try to make them \"publication\" ready\n   - Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n-   cereal.csv ⭐\n-   Total_cost_for_top_15_pathogens_2018.xlsx ⭐\n-   Australian Marriage ⭐⭐ \n-   AB_NYC_2019.csv ⭐⭐⭐\n-   StateCounty2012.xls ⭐⭐⭐\n-   Public School Characteristics ⭐⭐⭐⭐ \n-   USA Households ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Read in the data set and display rows\ndf <- read_csv('./_data/AB_NYC_2019.csv')\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 48,895 × 16\n      id name      host_id host_…¹ neigh…² neigh…³ latit…⁴ longi…⁵ room_…⁶ price\n   <dbl> <chr>       <dbl> <chr>   <chr>   <chr>     <dbl>   <dbl> <chr>   <dbl>\n 1  2539 Clean & …    2787 John    Brookl… Kensin…    40.6   -74.0 Privat…   149\n 2  2595 Skylit M…    2845 Jennif… Manhat… Midtown    40.8   -74.0 Entire…   225\n 3  3647 THE VILL…    4632 Elisab… Manhat… Harlem     40.8   -73.9 Privat…   150\n 4  3831 Cozy Ent…    4869 LisaRo… Brookl… Clinto…    40.7   -74.0 Entire…    89\n 5  5022 Entire A…    7192 Laura   Manhat… East H…    40.8   -73.9 Entire…    80\n 6  5099 Large Co…    7322 Chris   Manhat… Murray…    40.7   -74.0 Entire…   200\n 7  5121 BlissArt…    7356 Garon   Brookl… Bedfor…    40.7   -74.0 Privat…    60\n 8  5178 Large Fu…    8967 Shunic… Manhat… Hell's…    40.8   -74.0 Privat…    79\n 9  5203 Cozy Cle…    7490 MaryEl… Manhat… Upper …    40.8   -74.0 Privat…    79\n10  5238 Cute & C…    7549 Ben     Manhat… Chinat…    40.7   -74.0 Entire…   150\n# … with 48,885 more rows, 6 more variables: minimum_nights <dbl>,\n#   number_of_reviews <dbl>, last_review <date>, reviews_per_month <dbl>,\n#   calculated_host_listings_count <dbl>, availability_365 <dbl>, and\n#   abbreviated variable names ¹​host_name, ²​neighbourhood_group,\n#   ³​neighbourhood, ⁴​latitude, ⁵​longitude, ⁶​room_type\n```\n:::\n:::\n\n\n### Briefly describe the data\n\nThis data set appears to be displaying Airbnb information in New York during 2019.  Each row in the data set represents one Airbnb location in New York.  Each location is given a unique id which is found in the 'id' column of the data set.  Additionally, it appears that no two airbnbs have the same id.  This is evident by the fact that the tibble has 48,895 rows and there are 48,895 unique values in the 'id' column.  We can also see that each airbnb has a name to identify the location, however it appears to be possible for two airbnbs to have the same name because there is only 47,884 unique values in the 'name' column.  We can also see that the data set tracks the host information of each property and that some hosts own more than one property because there are less unique values in the 'host_id' column than there are rows in the data set. The data set also tracks the location of the property (both neighborhood and coordinates) as well review and price information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Print out the columns in the data set\ncolnames(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"id\"                             \"name\"                          \n [3] \"host_id\"                        \"host_name\"                     \n [5] \"neighbourhood_group\"            \"neighbourhood\"                 \n [7] \"latitude\"                       \"longitude\"                     \n [9] \"room_type\"                      \"price\"                         \n[11] \"minimum_nights\"                 \"number_of_reviews\"             \n[13] \"last_review\"                    \"reviews_per_month\"             \n[15] \"calculated_host_listings_count\" \"availability_365\"              \n```\n:::\n:::\n\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to anticipate your end result to provide a sanity check, and document your work here.\n\nThe data set is already tidy.  Each column in the data set represents a variable and each row in the data set represents a case (an airbnb booking) which is identifiable by its id.  Lastly, each value in the data set has it's own cell (there are no cells which contain more than one value).\n\nIt is worth noting that there are missing values in the data set.  There are four columns in the data set which are missing values: 'name', 'host_name', 'last_review', and 'reviews_per_month'.  These were found using the query below.  The missing values in the 'name' and 'host_name' columns indicate that is not mandatory for an airbnb to host to indicate the name of their property or themselves in the ad listing.  I think it also interesting that the number of missing values in the 'last_review' column is the same as the number of missing values in the 'reviews_per_month' column.  My guess is that these values are missing because the property has never received a month.  This would explain why the number of missing values in each column is the same. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% summarise(across(everything(), ~ sum(is.na(.)))) %>%\n  select(where(~sum(.) > 0))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 4\n   name host_name last_review reviews_per_month\n  <int>     <int>       <int>             <int>\n1    16        21       10052             10052\n```\n:::\n:::\n\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\nSKIP FOR NOW\n\n\n::: {.cell}\n\n:::\n\n\n## Univariate Visualizations\n\nLooking at the data, we can see that the 'room_type' variable is categorical.  In particular, we can see that there are three categories: 'Private room', 'Entire home/apt', and 'Shared room'.  We can use a bar chart to display the number of the bookings for each time.  Based on the bar chart below, we can see that renting an entire home or apartment is the most popular option.  Additionally, booking a shared room seems to be a very unpopular option. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a bar graph of room type\nggplot(df) +\n  geom_bar(mapping = aes(x = room_type, fill=room_type)) + \n  scale_fill_hue(c = 40) + \n  labs(x = \"Room Type\", \n       y = \"Number of Airbnbs\", \n       title = \"Room Type vs Number of Airbnbs\",\n       caption = \"(Graph Modified From R-Graph Gallery)\") + \n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](challenge5_MatthewNorberg_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nWe might be interested in investigating the price per booking.  In particular, I am curious to see if the price distribution is normal or skewed.  We can use a density plot to help visualize the price variable in the data set.  The code below is used to create such a plot. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a density plot for price\nggplot(df) + \n  geom_density(mapping = aes(x = price), adjust = 5) +\n  xlim(0, 2500) + \n  labs(x = \"Price\",\n       y = \"Count\",\n       title = \"Room Price Distribution\")\n```\n\n::: {.cell-output-display}\n![](challenge5_MatthewNorberg_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nLooking at the distribution above, we can see that the price of the rooms is extremely skewed.  There are many rooms that are available at affordable prices.  However, a few of them are very expensive.  In particular, there are several locations that cost more than $9,500 dollars.  Those bookings are displayed below\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter(df, price > 9500) %>% select(id, name, neighbourhood_group, price)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n        id name                                               neighbourh…¹ price\n     <dbl> <chr>                                              <chr>        <dbl>\n1  4737930 Spanish Harlem Apt                                 Manhattan     9999\n2  7003697 Furnished room in Astoria apartment                Queens       10000\n3  9528920 Quiet, Clean, Lit @ LES & Chinatown                Manhattan     9999\n4 13894339 Luxury 1 bedroom apt. -stunning Manhattan views    Brooklyn     10000\n5 22436899 1-BR Lincoln Center                                Manhattan    10000\n6 31340283 2br - The Heart of NYC: Manhattans Lower East Side Manhattan     9999\n# … with abbreviated variable name ¹​neighbourhood_group\n```\n:::\n:::\n\n\n## Bivariate Visualization(s)\n\nI thought it would be good to take another look at the bar graph that we generated in the previous section.  In this example, I filled the bars according to the 'neighbourhood_group' variable.  Using this visualization, we can see where most of the bookings are comming from.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a bar graph of room type using neighbourhood_group as fill\nggplot(df) +\n  geom_bar(mapping = aes(x = room_type, fill=neighbourhood_group)) + \n  scale_fill_hue(c = 40) + \n  labs(x = \"Room Type\", \n       y = \"Number of Airbnbs\", \n       title = \"Room Type vs Number of Airbnbs\",\n       caption = \"(Graph Modified From R-Graph Gallery)\",\n       fill = \"Neighbourhood Group\") + \n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](challenge5_MatthewNorberg_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nI thought it would also be interesting to look at the Price of the rental versus the number of reviews for the rental.  My intuition was that really expensive apartments would not have a lot of reviews because not many people would be able to afford it.  Additionally, I thought that really cheap rentals might have a lot of reviews either because a lot of people stayed there or a lot of people disliked it.  The graph below shows that my intuition was pretty close to correct.  The really expensive apartments have a small number of reviews in contrast to the really cheap apartments. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df) + \n  geom_point(mapping = aes(x = number_of_reviews, y = price)) + \n  geom_jitter(mapping = aes(x = number_of_reviews, y = price), alpha = 0.1) + \n  labs(x = \"Number of Reviews\",\n       y = \"Price\",\n       title = \"Price vs Number of Reviews\")\n```\n\n::: {.cell-output-display}\n![](challenge5_MatthewNorberg_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nAny additional comments?\n",
    "supporting": [
      "challenge5_MatthewNorberg_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}