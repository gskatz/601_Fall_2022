{
  "hash": "f562e4fa56f9c44400da5f1c8dac9abe",
  "result": {
    "markdown": "---\ntitle: \"Final Project\"\nauthor: \"Lai Wei\"\ndesription: \"Something to describe what I did\"\ndate: \"12/18/2022\"\nformat:\n  pdf:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - Final Project\n  - Lai Wei\n  - dataset\n  - ggplot2\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gapminder)\nlibrary(readxl)\nlibrary(ggplot2)\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\n## Introducation\n\nLife expectancy is a statistical measure of the average time an organism is expected to live, based on the year of its birth, current age, and other demographic factors like sex. It is one of the important reference indexes used to evaluate the quality of life of a country's population and the health level of its citizens. At the same time, it can also reflect the survival pressure and gender difference. \n\nIn this project, I want to focus on female life expectancy in Eastern Asia countries firstly, and compare it with the life expectancy of those countries in the same years. It is higher, or lower? Additionally, what kind of possible factors may impact life expectancy of the female group is the following question I want to expand. I think from it, I can build a clearer perceive of female survival condition in these countries. \n\nThe purpose of choosing Eastern Asia is because it is the area I am from, I have more interests in this particular place. And I expect to explore more about female's survival challenges or hidden danger. \n\n## Data Import\n\nI have 4 data sets in total. Two for the comparison topic, and two for the expansion. They are from gapminder organization and United nations data. I am going to introduce them in this section. \n\n-Life Expectancy\n\nThe first dataset I chose is from gapminder package. It covers 142 countries from 1952 to 2007 in every five years. Variables in this dataset includes life expectancy, population and GDP/capita. Based on it, I use filter() function to select Asian countries only, and made a new set for next content.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#First data set: Life expectancy in the world\ndat_asia <- filter(gapminder, continent == \"Asia\" )\ndat_asia\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 396 x 6\n   country     continent  year lifeExp      pop gdpPercap\n   <fct>       <fct>     <int>   <dbl>    <int>     <dbl>\n 1 Afghanistan Asia       1952    28.8  8425333      779.\n 2 Afghanistan Asia       1957    30.3  9240934      821.\n 3 Afghanistan Asia       1962    32.0 10267083      853.\n 4 Afghanistan Asia       1967    34.0 11537966      836.\n 5 Afghanistan Asia       1972    36.1 13079460      740.\n 6 Afghanistan Asia       1977    38.4 14880372      786.\n 7 Afghanistan Asia       1982    39.9 12881816      978.\n 8 Afghanistan Asia       1987    40.8 13867957      852.\n 9 Afghanistan Asia       1992    41.7 16317921      649.\n10 Afghanistan Asia       1997    41.8 22227415      635.\n# ... with 386 more rows\n```\n:::\n:::\n\n\n-Life Expectancy: Female\n\nMy second data set is the life expectancy of only females from 1953 to 2022. Then I use filter() function to get the Eastern Asia countries only.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_fem_1 <- read.csv(\"_data/life_expectancy_female.csv\", \n                    check.names = FALSE) %>% \n  filter(country == \"China\"| country ==\"Japan\"| country == \"Taiwan\"| country == \"Mongolia\"| country == \"South Korea\" | country == \"North Korea\" )\ndat_fem_1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      country 1953 1954 1955 1956 1957 1958 1959 1960 1961 1962 1963 1964 1965\n1       China 48.5 49.1 49.7 50.2 50.8 41.4 34.6 42.1 53.0 53.6 54.3 55.1 55.8\n2       Japan 66.6 67.8 67.7 67.6 69.3 69.8 70.1 70.8 71.1 72.3 72.8 72.8 73.6\n3 South Korea 49.0 51.2 52.9 54.2 55.2 56.1 56.8 57.4 58.0 58.8 60.3 61.6 63.1\n4    Mongolia 42.9 43.3 43.8 42.7 45.3 46.3 47.2 48.2 49.2 50.1 50.8 51.5 52.0\n5 North Korea 50.6 51.8 52.9 53.8 54.5 55.1 55.7 56.2 56.8 57.4 58.0 58.7 59.5\n6      Taiwan 60.9 61.7 62.4 62.9 63.6 64.3 65.1 65.5 66.1 66.8 67.7 68.6 68.7\n  1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980\n1 56.5 57.1 57.8 58.6 59.5 60.4 61.4 62.3 63.1 64.0 64.7 65.5 66.1 66.7 67.3\n2 74.0 74.3 74.6 74.7 75.5 75.9 76.0 76.4 76.9 77.3 77.9 78.2 78.8 78.8 79.2\n3 65.1 65.6 66.1 66.4 67.1 67.6 68.2 68.9 69.2 69.7 69.2 70.1 71.4 70.4 73.3\n4 52.8 53.3 54.0 54.7 55.4 56.0 56.6 57.2 57.6 57.5 57.7 57.8 57.9 58.0 58.1\n5 60.4 61.2 61.9 62.7 63.3 64.0 64.6 65.3 65.9 66.5 67.1 67.7 68.3 68.8 69.4\n6 69.2 69.5 70.7 71.8 72.0 72.3 72.5 73.0 73.5 73.9 74.0 74.6 74.6 74.7 74.7\n  1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995\n1 67.8 68.3 68.7 69.1 69.4 69.8 70.1 70.3 70.4 70.3 71.0 71.5 71.7 72.3 72.5\n2 79.7 79.8 80.3 80.5 81.0 81.4 81.3 81.8 81.9 82.2 82.3 82.4 82.9 82.8 83.5\n3 72.7 72.0 73.5 73.8 74.2 74.3 75.1 75.7 76.4 76.9 77.4 77.6 77.9 78.2 78.4\n4 58.2 58.7 59.2 59.5 59.5 60.0 60.5 61.1 61.5 62.0 62.4 62.8 63.2 63.2 63.1\n5 70.0 70.6 71.2 71.8 72.3 72.7 73.2 73.5 73.8 74.0 74.6 76.3 74.9 64.2 64.2\n6 75.2 75.2 75.9 76.0 76.1 76.5 76.3 76.7 76.9 77.3 77.3 77.8 78.0 77.9 78.1\n  1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010\n1 72.9 73.6 73.6 74.2 75.3 75.6 76.0 76.4 76.8 77.2 77.5 77.6 78.1 78.3 78.6\n2 83.7 83.9 83.9 84.5 84.8 85.1 85.2 85.5 85.4 85.7 85.9 86.0 86.3 86.2 85.9\n3 79.0 79.4 79.8 80.2 81.0 81.1 81.1 81.5 81.9 82.5 82.8 83.5 84.0 84.2 84.6\n4 63.7 64.5 65.2 65.9 67.2 68.1 69.3 69.9 70.1 70.4 70.8 71.1 71.5 71.8 71.7\n5 64.2 64.1 63.9 63.8 63.8 63.8 73.1 72.9 72.7 72.5 72.2 72.3 73.0 73.5 74.1\n6 78.6 78.8 78.9 79.5 79.8 80.2 80.3 80.7 80.8 81.5 81.6 81.8 82.2 82.6 82.6\n  2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021\n1 79.0 79.2 79.5 79.8 80.1 80.3 80.6 80.8 81.1 81.2 81.3\n2 86.4 86.6 86.8 87.0 87.1 87.3 87.3 87.4 87.7 87.7 87.8\n3 84.7 85.2 85.7 85.8 86.1 86.4 86.5 86.7 86.7 86.8 87.1\n4 72.5 72.9 73.3 73.7 74.0 74.3 75.8 76.6 77.0 75.7 77.4\n5 74.6 75.3 75.9 75.5 75.5 75.6 75.6 75.7 75.7 75.7 76.1\n6 82.7 83.1 83.0 83.4 83.3 83.6 84.0 84.1 84.3 84.4 84.5\n```\n:::\n:::\n\n\nHowever, its structure is a bit different from the first one. For the better comparison later, I need to tidy data in the first place.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_fem_2 <- dat_fem_1 %>%  \n  pivot_longer(!country, names_to = \"year\", values_to = \"fem_lif\") \n  \ndat_fem_2 <- dat_fem_2 %>% \n  mutate(country = str_replace(country, \"South Korea\",  \"Korea, Rep.\")) %>% \n  mutate(country = str_replace(country, \"North Korea\",  \"Korea, Dem. Rep.\"))\n\ndat_fem_2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 414 x 3\n   country year  fem_lif\n   <chr>   <chr>   <dbl>\n 1 China   1953     48.5\n 2 China   1954     49.1\n 3 China   1955     49.7\n 4 China   1956     50.2\n 5 China   1957     50.8\n 6 China   1958     41.4\n 7 China   1959     34.6\n 8 China   1960     42.1\n 9 China   1961     53  \n10 China   1962     53.6\n# ... with 404 more rows\n```\n:::\n:::\n\n\nNow, the second data set uses the similar format with dat_asia with only country, year and life expectancy variables.\n\nThe following two data are for reflection section.\n\n-Average Fertility\n\nMy third data set is from UN World Population Prospects, Total fertility rate(TFR) form, which informally refers to the average number of children per woman. The official interpretation is as follows \"The average number of live births a hypothetical cohort of women would have at the end of their reproductive period if they were subject during their whole lives to the fertility rates of a given period and if they were not subject to mortality. It is expressed as live births per woman.'\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- read_excel(\"_data/WPP2019_FERT_F04_TOTAL_FERTILITY.xlsx\",\n                   skip = 16, sheet = \"ESTIMATES\", na = \"...\")\nglimpse(dat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 255\nColumns: 21\n$ Index                                  <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ~\n$ Variant                                <chr> \"Estimates\", \"Estimates\", \"Esti~\n$ `Region, subregion, country or area *` <chr> \"WORLD\", \"UN development groups~\n$ Notes                                  <chr> NA, \"a\", \"b\", \"c\", \"d\", \"e\", NA~\n$ `Country code`                         <dbl> 900, 1803, 901, 902, 941, 934, ~\n$ Type                                   <chr> \"World\", \"Label/Separator\", \"De~\n$ `Parent code`                          <dbl> 0, 900, 1803, 1803, 902, 902, 1~\n$ `1950-1955`                            <dbl> 4.967376, NA, 2.820130, 6.07912~\n$ `1955-1960`                            <dbl> 4.897248, NA, 2.793601, 5.93907~\n$ `1960-1965`                            <dbl> 5.018108, NA, 2.659625, 6.12700~\n$ `1965-1970`                            <dbl> 4.926342, NA, 2.384311, 6.03837~\n$ `1970-1975`                            <dbl> 4.471131, NA, 2.155941, 5.40596~\n$ `1975-1980`                            <dbl> 3.860745, NA, 1.919390, 4.57708~\n$ `1980-1985`                            <dbl> 3.588277, NA, 1.843846, 4.16199~\n$ `1985-1990`                            <dbl> 3.438576, NA, 1.809229, 3.90486~\n$ `1990-1995`                            <dbl> 3.005020, NA, 1.669345, 3.33904~\n$ `1995-2000`                            <dbl> 2.776534, NA, 1.565000, 3.04403~\n$ `2000-2005`                            <dbl> 2.651327, NA, 1.576829, 2.86600~\n$ `2005-2010`                            <dbl> 2.584242, NA, 1.675155, 2.74898~\n$ `2010-2015`                            <dbl> 2.517075, NA, 1.667226, 2.65610~\n$ `2015-2020`                            <dbl> 2.468109, NA, 1.643329, 2.59261~\n```\n:::\n:::\n\nIn this data set, the rows refer to countries as well as other geographical regions, and I am going to focus on countries only, which are defined as rows with the column Type being Country/Area. In addition, Parent code indicates the geographical region that the country belongs too.\n\n-Maternal Mortality Ratio (MMR)\n\nMMR is defined as the number of maternal deaths/100,000 lives births. The UN maternal mortality estimation group produces estimates of the MMR for all countries in the world. In this data set, mmr_2015, which is a data set that contains a subset of the (real) data that were used to generate the United Nations Maternal mortality estimates, as published in the year 2015, which is also imported for reflection section.\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_mmr <- read.csv(\"_data/mmr_2015.csv\")\n\ndat_mmr\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    iso                    country year      mmr\n1   AFG                Afghanistan 2000 1900.000\n2   DZA                    Algeria 1999  117.410\n3   BGD                 Bangladesh 2009  194.000\n4   BGD                 Bangladesh 2000  322.156\n5   BWA                   Botswana 2006  139.790\n6   BWA                   Botswana 2012  147.900\n7   BWA                   Botswana 2005  157.700\n8   BWA                   Botswana 2010  163.000\n9   BWA                   Botswana 2013  182.600\n10  BWA                   Botswana 2007  183.470\n11  BWA                   Botswana 2011  188.860\n12  BWA                   Botswana 2009  189.570\n13  BWA                   Botswana 2008  195.730\n14  CMR                   Cameroon 2010  652.000\n15  CHN                      China 2012   24.500\n16  CHN                      China 2011   26.100\n17  CHN                      China 2010   30.000\n18  CHN                      China 2009   31.900\n19  CHN                      China 2008   34.200\n20  CHN                      China 2007   36.600\n21  CHN                      China 2006   41.100\n22  CHN                      China 2002   43.200\n23  CHN                      China 2005   47.700\n24  CHN                      China 2004   48.300\n25  CHN                      China 2001   50.200\n26  CHN                      China 2003   51.300\n27  CHN                      China 2000   53.000\n28  CHN                      China 1999   58.700\n29  CHN                      China 1995   61.900\n30  CHN                      China 1997   63.600\n31  CHN                      China 1990   88.900\n32  EGY                      Egypt 2006   59.000\n33  EGY                      Egypt 2004   68.000\n34  EGY                      Egypt 2000   84.000\n35  EGY                      Egypt 1992  174.000\n36  SLV                El Salvador 2008   51.090\n37  SLV                El Salvador 2007   56.930\n38  HND                   Honduras 2012   74.100\n39  HND                   Honduras 2013   86.000\n40  IND                      India 2012  167.000\n41  IND                      India 2011  178.000\n42  IND                      India 2008  212.000\n43  IND                      India 2005  254.000\n44  IND                      India 2002  301.000\n45  IND                      India 2000  327.000\n46  IND                      India 1998  398.000\n47  IND                      India 1992  437.000\n48  IND                      India 1999  540.000\n49  IRN Iran (Islamic Republic of) 2013   19.700\n50  IRN Iran (Islamic Republic of) 2012   19.900\n51  IRN Iran (Islamic Republic of) 2008   20.900\n52  IRN Iran (Islamic Republic of) 2011   21.500\n53  IRN Iran (Islamic Republic of) 2006   21.700\n54  IRN Iran (Islamic Republic of) 2010   22.100\n55  IRN Iran (Islamic Republic of) 2005   23.800\n56  IRN Iran (Islamic Republic of) 2004   24.100\n57  IRN Iran (Islamic Republic of) 2007   24.700\n58  IRN Iran (Islamic Republic of) 2009   25.400\n59  IRN Iran (Islamic Republic of) 2002   27.400\n60  IRN Iran (Islamic Republic of) 2003   28.300\n61  IRQ                       Iraq 2012   35.000\n62  JAM                    Jamaica 2009   73.200\n63  JAM                    Jamaica 1999   73.500\n64  JAM                    Jamaica 1995   81.300\n65  JAM                    Jamaica 2012   81.300\n66  JAM                    Jamaica 2004   82.500\n67  JAM                    Jamaica 2003   89.800\n68  JAM                    Jamaica 1998   90.100\n69  JAM                    Jamaica 2000   90.300\n70  JAM                    Jamaica 2001   91.500\n71  JAM                    Jamaica 2007   92.900\n72  JAM                    Jamaica 2011   95.700\n73  JAM                    Jamaica 2006   96.700\n74  JAM                    Jamaica 2008  102.000\n75  JAM                    Jamaica 2005  109.200\n76  JAM                    Jamaica 2002  110.500\n77  JAM                    Jamaica 2010  113.300\n78  MNG                   Mongolia 2014   30.200\n79  MNG                   Mongolia 2013   42.600\n80  MNG                   Mongolia 2010   47.400\n81  MNG                   Mongolia 2008   48.600\n82  MNG                   Mongolia 2011   48.700\n83  MNG                   Mongolia 2012   51.500\n84  MNG                   Mongolia 2006   67.200\n85  MNG                   Mongolia 2009   81.000\n86  MNG                   Mongolia 2007   88.300\n87  MNG                   Mongolia 2005   92.700\n88  MNG                   Mongolia 2004   96.700\n89  MNG                   Mongolia 2003  107.200\n90  MNG                   Mongolia 2002  121.500\n91  MNG                   Mongolia 1997  143.500\n92  MNG                   Mongolia 1998  162.400\n93  MNG                   Mongolia 2001  165.000\n94  MNG                   Mongolia 2000  166.200\n95  MNG                   Mongolia 1996  173.700\n96  MNG                   Mongolia 1999  182.000\n97  MNG                   Mongolia 1995  186.000\n98  MNG                   Mongolia 1992  203.900\n99  MNG                   Mongolia 1994  219.000\n100 MNG                   Mongolia 1993  259.000\n101 MMR                    Myanmar 2004  315.860\n102 NPL                      Nepal 2008  229.000\n103 OMN                       Oman 1993    6.000\n104 OMN                       Oman 1997   13.300\n105 OMN                       Oman 1999   13.700\n106 OMN                       Oman 2005   15.400\n107 OMN                       Oman 1992   15.900\n108 OMN                       Oman 2000   16.100\n109 OMN                       Oman 1998   18.500\n110 OMN                       Oman 2004   18.500\n111 OMN                       Oman 1996   21.000\n112 OMN                       Oman 1995   22.000\n113 OMN                       Oman 2001   23.100\n114 OMN                       Oman 2003   23.200\n115 OMN                       Oman 1994   24.400\n116 OMN                       Oman 1991   27.400\n117 OMN                       Oman 2002   37.500\n118 PRY                   Paraguay 2001  178.000\n119 PER                       Peru 2011   92.700\n120 PER                       Peru 2010   95.900\n121 PER                       Peru 2009   96.100\n122 PER                       Peru 2008  107.900\n123 PER                       Peru 2007  110.500\n124 PER                       Peru 2005  114.100\n125 PER                       Peru 2006  114.900\n126 PER                       Peru 2002  118.300\n127 PER                       Peru 2004  120.800\n128 PER                       Peru 2003  123.800\n129 SAU               Saudi Arabia 1997   23.000\n130 SSD                South Sudan 2005 2037.000\n131 LKA                  Sri Lanka 2010   31.100\n132 LKA                  Sri Lanka 2011   32.500\n133 LKA                  Sri Lanka 2008   33.400\n134 LKA                  Sri Lanka 2012   37.700\n135 LKA                  Sri Lanka 2004   38.000\n136 LKA                  Sri Lanka 2007   38.400\n137 LKA                  Sri Lanka 2006   39.300\n138 LKA                  Sri Lanka 2009   40.200\n139 LKA                  Sri Lanka 2003   42.400\n140 LKA                  Sri Lanka 2005   44.000\n141 LKA                  Sri Lanka 2001   46.600\n142 LKA                  Sri Lanka 1998   53.000\n143 LKA                  Sri Lanka 2002   53.400\n144 LKA                  Sri Lanka 2000   55.600\n145 LKA                  Sri Lanka 1999   55.800\n146 LKA                  Sri Lanka 1995   61.000\n147 LKA                  Sri Lanka 1996   62.000\n148 LKA                  Sri Lanka 1997   63.000\n149 SDN                      Sudan 2009  215.600\n150 SDN                      Sudan 2005  638.000\n151 SYR       Syrian Arab Republic 2008   56.000\n152 THA                   Thailand 1998   36.400\n153 THA                   Thailand 1997   36.500\n154 THA                   Thailand 2005   37.400\n155 THA                   Thailand 2006   41.600\n156 THA                   Thailand 1996   44.100\n157 THA                   Thailand 2004   44.500\n158 TUN                    Tunisia 2008   44.800\n159 TUN                    Tunisia 1993   68.900\n160 TUR                     Turkey 2014   15.200\n161 TUR                     Turkey 2012   15.400\n162 TUR                     Turkey 2011   15.500\n163 TUR                     Turkey 2013   15.900\n164 TUR                     Turkey 2010   16.400\n165 TUR                     Turkey 2009   18.400\n166 TUR                     Turkey 2008   19.400\n167 TUR                     Turkey 2007   21.200\n168 ARE       United Arab Emirates 2005    0.000\n169 ARE       United Arab Emirates 2000    0.000\n170 ARE       United Arab Emirates 2008    1.400\n171 ARE       United Arab Emirates 1995   22.400\n172 ARE       United Arab Emirates 1990   32.600\n173 VNM                   Viet Nam 2009   69.000\n174 VNM                   Viet Nam 2001  130.000\n175 YEM                      Yemen 2012  148.160\n```\n:::\n:::\n\n\n## Data Description\n\nBy understanding the distribution of our discrete variable in continent of gapminder package, by using geom_bar(), I can get a bar plot counting the observation in each continent in different colors. And by using ...count.../12, the plot can represent the number of countries in each continent.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(gapminder, aes(x = continent, fill = continent)) + \n    geom_bar(aes(y = ..count../12)) + labs(y = \"Number of countries\") +\n    guides(fill = \"none\") \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.\ni Please use `after_stat(count)` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_project_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n:::\n\nAs displaying, Africa has the largest number of countries in this data, and Asia has more than 30 countries data.\n\nFor looking for the chosen countries in the second data, run the code below. \n\n::: {.cell}\n\n```{.r .cell-code}\nselect(dat_fem_1, \"country\") \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      country\n1       China\n2       Japan\n3 South Korea\n4    Mongolia\n5 North Korea\n6      Taiwan\n```\n:::\n:::\n\nFor more clear and scientific, South Korea will be set as Korea.Rep., and North Korea as Korea,Dem.Rep. for my report. \n\nFor comparing with life expectancy of nations and females only, I made a final vision of data by merge().\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_final <- merge(dat_asia, dat_fem_2, by = c(\"country\",\"year\"))\n\ndat_final\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n            country year continent  lifeExp        pop  gdpPercap fem_lif\n1             China 1957      Asia 50.54896  637408000   575.9870    50.8\n2             China 1962      Asia 44.50136  665770000   487.6740    53.6\n3             China 1967      Asia 58.38112  754550000   612.7057    57.1\n4             China 1972      Asia 63.11888  862030000   676.9001    61.4\n5             China 1977      Asia 63.96736  943455000   741.2375    65.5\n6             China 1982      Asia 65.52500 1000281000   962.4214    68.3\n7             China 1987      Asia 67.27400 1084035000  1378.9040    70.1\n8             China 1992      Asia 68.69000 1164970000  1655.7842    71.5\n9             China 1997      Asia 70.42600 1230075000  2289.2341    73.6\n10            China 2002      Asia 72.02800 1280400000  3119.2809    76.0\n11            China 2007      Asia 72.96100 1318683096  4959.1149    77.6\n12            Japan 1957      Asia 65.50000   91563009  4317.6944    69.3\n13            Japan 1962      Asia 68.73000   95831757  6576.6495    72.3\n14            Japan 1967      Asia 71.43000  100825279  9847.7886    74.3\n15            Japan 1972      Asia 73.42000  107188273 14778.7864    76.0\n16            Japan 1977      Asia 75.38000  113872473 16610.3770    78.2\n17            Japan 1982      Asia 77.11000  118454974 19384.1057    79.8\n18            Japan 1987      Asia 78.67000  122091325 22375.9419    81.3\n19            Japan 1992      Asia 79.36000  124329269 26824.8951    82.4\n20            Japan 1997      Asia 80.69000  125956499 28816.5850    83.9\n21            Japan 2002      Asia 82.00000  127065841 28604.5919    85.2\n22            Japan 2007      Asia 82.60300  127467972 31656.0681    86.0\n23 Korea, Dem. Rep. 1957      Asia 54.08100    9411381  1571.1347    54.5\n24 Korea, Dem. Rep. 1962      Asia 56.65600   10917494  1621.6936    57.4\n25 Korea, Dem. Rep. 1967      Asia 59.94200   12617009  2143.5406    61.2\n26 Korea, Dem. Rep. 1972      Asia 63.98300   14781241  3701.6215    64.6\n27 Korea, Dem. Rep. 1977      Asia 67.15900   16325320  4106.3012    67.7\n28 Korea, Dem. Rep. 1982      Asia 69.10000   17647518  4106.5253    70.6\n29 Korea, Dem. Rep. 1987      Asia 70.64700   19067554  4106.4923    73.2\n30 Korea, Dem. Rep. 1992      Asia 69.97800   20711375  3726.0635    76.3\n31 Korea, Dem. Rep. 1997      Asia 67.72700   21585105  1690.7568    64.1\n32 Korea, Dem. Rep. 2002      Asia 66.66200   22215365  1646.7582    73.1\n33 Korea, Dem. Rep. 2007      Asia 67.29700   23301725  1593.0655    72.3\n34      Korea, Rep. 1957      Asia 52.68100   22611552  1487.5935    55.2\n35      Korea, Rep. 1962      Asia 55.29200   26420307  1536.3444    58.8\n36      Korea, Rep. 1967      Asia 57.71600   30131000  2029.2281    65.6\n37      Korea, Rep. 1972      Asia 62.61200   33505000  3030.8767    68.2\n38      Korea, Rep. 1977      Asia 64.76600   36436000  4657.2210    70.1\n39      Korea, Rep. 1982      Asia 67.12300   39326000  5622.9425    72.0\n40      Korea, Rep. 1987      Asia 69.81000   41622000  8533.0888    75.1\n41      Korea, Rep. 1992      Asia 72.24400   43805450 12104.2787    77.6\n42      Korea, Rep. 1997      Asia 74.64700   46173816 15993.5280    79.4\n43      Korea, Rep. 2002      Asia 77.04500   47969150 19233.9882    81.1\n44      Korea, Rep. 2007      Asia 78.62300   49044790 23348.1397    83.5\n45         Mongolia 1957      Asia 45.24800     882134   912.6626    45.3\n46         Mongolia 1962      Asia 48.25100    1010280  1056.3540    50.1\n47         Mongolia 1967      Asia 51.25300    1149500  1226.0411    53.3\n48         Mongolia 1972      Asia 53.75400    1320500  1421.7420    56.6\n49         Mongolia 1977      Asia 55.49100    1528000  1647.5117    57.8\n50         Mongolia 1982      Asia 57.48900    1756032  2000.6031    58.7\n51         Mongolia 1987      Asia 60.22200    2015133  2338.0083    60.5\n52         Mongolia 1992      Asia 61.27100    2312802  1785.4020    62.8\n53         Mongolia 1997      Asia 63.62500    2494803  1902.2521    64.5\n54         Mongolia 2002      Asia 65.03300    2674234  2140.7393    69.3\n55         Mongolia 2007      Asia 66.80300    2874127  3095.7723    71.1\n56           Taiwan 1957      Asia 62.40000   10164215  1507.8613    63.6\n57           Taiwan 1962      Asia 65.20000   11918938  1822.8790    66.8\n58           Taiwan 1967      Asia 67.50000   13648692  2643.8587    69.5\n59           Taiwan 1972      Asia 69.39000   15226039  4062.5239    72.5\n60           Taiwan 1977      Asia 70.59000   16785196  5596.5198    74.6\n61           Taiwan 1982      Asia 72.16000   18501390  7426.3548    75.2\n62           Taiwan 1987      Asia 73.40000   19757799 11054.5618    76.3\n63           Taiwan 1992      Asia 74.26000   20686918 15215.6579    77.8\n64           Taiwan 1997      Asia 75.25000   21628605 20206.8210    78.8\n65           Taiwan 2002      Asia 76.99000   22454239 23235.4233    80.3\n66           Taiwan 2007      Asia 78.40000   23174294 28718.2768    81.8\n```\n:::\n:::\n\nSo the information of dat_aisa and dat_fem_2 can be put together. \n\nThen I find some basic description of the dataset: dimensions and column names of my final vision data. \n\n::: {.cell}\n\n```{.r .cell-code}\ndim(dat_final)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 66  7\n```\n:::\n\n```{.r .cell-code}\ncolnames(dat_final)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"country\"   \"year\"      \"continent\" \"lifeExp\"   \"pop\"       \"gdpPercap\"\n[7] \"fem_lif\"  \n```\n:::\n:::\n\nIt provides 7 column in total, and shows values for countries , continent, year, life expectancy for the whole nations, population, GDP/capita, and life expectancy for only female. \n\n## Visualization\n\nBefore plotting any relationship between gender with life expectancy, I created a simple base R plot of life expectancy against log(GDP) in Asia countries:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nasia_plot <- plot(lifeExp ~ log10(gdpPercap), data = dat_asia)\n```\n\n::: {.cell-output-display}\n![](Final_project_files/figure-pdf/unnamed-chunk-11-1.pdf){fig-pos='H'}\n:::\n:::\n\nFrom image above, we can see the tendency of Asian life expectancy roughly increases as GDP/capita increases from 1952 to 2007. So life expectancy have a positive correlation with GDP/capita.\n\nFor answering my question, I will plot life expectancy over time and connect country data points such that the plot shows one line for each country. The result plot is displayed below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_asia %>% \n  filter(country == \"China\"| country ==\"Japan\"| country == \"Taiwan\"| country == \"Mongolia\"| country == \"Korea, Rep.\"| country == \"Korea, Dem. Rep.\") %>% \n  ggplot(aes(x=year,y=lifeExp,color=country, shape = country)) + \n  geom_point() + geom_line() \n```\n\n::: {.cell-output-display}\n![](Final_project_files/figure-pdf/unnamed-chunk-12-1.pdf){fig-pos='H'}\n:::\n:::\n\nFrom the result, we can see Eastern Asian life expectancy keeps going up from 1952 to 2007. Among this countries, the highest life expectancy belongs to Japan, and the lowest is Mongolia. However, there is a obvious downward line of China happened in 1960s, and Korea,Dem.Rep. also displays the decrease from 1980s to 1990s. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_gra <- dat_final %>%\n  select(country, year, lifeExp,fem_lif) %>% \n  pivot_longer(-c(country, year), names_to = \"type\", values_to = \"life expectancy\")\n\n  ggplot(data = dat_gra, aes(x = country, y = dat_gra$`life expectancy`, fill = type)) + \n    geom_boxplot() + ylab(\"life expectancy\") + \n    scale_x_discrete(guide = guide_axis(n.dodge=3))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Use of `` dat_gra$`life expectancy` `` is discouraged.\ni Use `life expectancy` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_project_files/figure-pdf/unnamed-chunk-13-1.pdf){fig-pos='H'}\n:::\n:::\n\nFrom above comparison, the result shows that as in general, female has a longer life expectancy than the whole country. The average distinct is usually not exceed for 5 years. \n\n## Reflection\n\nIn Reflection section, I also want to make a step forward in my topic in the first place, which is about fertility and mortality ratio. Can they be possible factors to impact female life expectancy? I need to start with fertility ratio in the first place.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_coun <- filter(dat, `Parent code` == 906) %>% \n  pivot_longer(\"1950-1955\":\"2015-2020\",  \n  names_to = \"period\", values_to = \"tfr\")\n\ncolnames(dat_coun)[3] = \"Country\"\n\ndat_coun <- dat_coun %>% \n  group_by(Country)%>%\n  mutate(Category = ifelse(tfr[period ==\"2015-2020\"]>5, \"high fertility\", \"low fertility\") ) %>%\n  mutate(year = str_sub(period, start = 1, end = 4)) %>%\n  mutate(year = as.numeric(year) + 2.5)\n\nggplot(dat = dat_coun, aes(x = year,y = tfr))+\n  geom_point(aes(x = year,y = tfr,shape = Category, color = Country))+\n  geom_line(aes(group = Country, color = Country)) +\n  xlab(\"year\") + ylab(\"tfr\") +\n  guides(shape = guide_legend(order = 1))\n```\n\n::: {.cell-output-display}\n![](Final_project_files/figure-pdf/unnamed-chunk-14-1.pdf){fig-pos='H'}\n:::\n:::\n\nIt shows that Mongolia holds the highest fertility rate in Eastern Asia, and other countries are all less than 2 tfr at the end of the point. In addition, the whole Eastern Asia are facing the problem of low fertility after at least 2015, which is lower than 5 tfr. \n\nThen I use mmr data to compare and see whether fertility ratio leads a relative higher maternal mortality ratio. \n\n::: {.cell}\n\n```{.r .cell-code}\ndat_mmr %>%\n  filter(country %in% c(\"China\", \"Mongolia\")) %>%\n  filter(year >= 2000) %>%\n  ggplot() + geom_point(mapping = aes(x = year, y = mmr, col = country))\n```\n\n::: {.cell-output-display}\n![](Final_project_files/figure-pdf/unnamed-chunk-15-1.pdf){fig-pos='H'}\n:::\n:::\n\nSo, as we can see, Mongolia has a higher maternal mortality ratio, at the same time the fertility ratio is the highest in Eastern Asia. Then, a reasonable conclusion can be made is that the country with high fertility ratio can also have high maternal mortality ratio, which can may increase the female life expectancy of the country. \n\n## Conclusion\n\nThis project is mean to investigate how life expectancy is different based on gender factor. From boxpolt, in general female life expectancy is longer than the average life expectancy of the same nations. \n\n## Bibliography\n\nlife_expectancy_female, gapminder, download the data, https://www.gapminder.org/data/\n\nWPP2019_FERT_F04_TOTAL_FERTILITY, United Nations, UNdata, https://data.un.org/\n\nmmr_2015, United Nations, UNdata, https://data.un.org/\n",
    "supporting": [
      "Final_project_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}