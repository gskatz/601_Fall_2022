{
  "hash": "f7a6c36c980d81924dce48b93f35dc8f",
  "result": {
    "markdown": "---\ntitle: \"Homework 2 Abby Balint\"\nauthor: \"Abby Balint\"\ndesription: \"HW2 - Read in/tidying\"\ndate: \"10/11/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - hw2\n  - abby_balint\n  - SharkAttackKaggle\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n### Homework 2 Intro\n\n\nFor Homework 2 I found a dataset on Kaggle about Shark Attacks that I am reading in below using read_csv, renaming it to \"shark\" to make it easy to work with. I will then describe the dataset as well as what I am doing to tidy/mutate it to answer potential questions or points of analysis. The dataset I downloaded can be found here: [https://www.kaggle.com/datasets/mysarahmadbhat/shark-attacks](link)\n\nMy goal is to be able to describe some high level statistics about shark attacks in the USA since 2000.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshark <- read_csv(\"_data/shark attacks_abbybalintHW2.csv\")\nhead(shark)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 22\n  Case Numbe…¹ Date   Year Type  Country Area  Locat…² Activ…³ Name  Sex   Age  \n  <chr>        <chr> <dbl> <chr> <chr>   <chr> <chr>   <chr>   <chr> <chr> <chr>\n1 2017.06.11   6/11…  2017 Unpr… AUSTRA… West… Point … Body b… Paul… M     48   \n2 2017.06.10.b 6/10…  2017 Unpr… AUSTRA… Vict… Flinde… Surfing fema… F     <NA> \n3 2017.06.10.a 6/10…  2017 Unpr… USA     Flor… Ponce … Surfing Brya… M     19   \n4 2017.06.07.R Repo…  2017 Unpr… UNITED… Sout… Bantha… Surfing Rich… M     30   \n5 2017.06.04   6/4/…  2017 Unpr… USA     Flor… Middle… Spearf… Park… M     <NA> \n6 2017.06.02   6/2/…  2017 Unpr… BAHAMAS New … Athol … Snorke… Tiff… F     32   \n# … with 11 more variables: Injury <chr>, `Fatal (Y/N)` <chr>, Time <chr>,\n#   Species <chr>, `Investigator or Source` <chr>, pdf <chr>,\n#   `href formula` <chr>, href <chr>, `Case Number...20` <chr>,\n#   `Case Number...21` <chr>, `original order` <dbl>, and abbreviated variable\n#   names ¹​`Case Number...1`, ²​Location, ³​Activity\n```\n:::\n:::\n\n\n### Description of the data\nThis dataset is from Kaggle and appears to likely be an aggregate of a few different data sources as it goes back to the late 1800's all the way to 2017, including over 6,000 individual shark attacks. The data spans several countries. There is a variable titled \"source\" that describes where each individual attack was originally cited from. There are 22 variables, however many of them are different ways of describing a date, so it makes sense to choose the best column representative of date and remove some of the others. The other columns describe each shark attack with variables like location, activity, demos about the victim, injury type, and shark species. \n\n## Tidying the data\n\n1. I am selecting only the columns I want to work with, dropping some of the columns that reference source of data as I can reference those individually if needed in the original dataset, but they won't necessarily be useful for my analysis.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsharknew <- shark %>%\n  select(\"Date\":\"Species\", \"original order\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(sharknew)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 15\n  Date         Year Type  Country Area  Locat…¹ Activ…² Name  Sex   Age   Injury\n  <chr>       <dbl> <chr> <chr>   <chr> <chr>   <chr>   <chr> <chr> <chr> <chr> \n1 6/11/17      2017 Unpr… AUSTRA… West… Point … Body b… Paul… M     48    No in…\n2 6/10/17      2017 Unpr… AUSTRA… Vict… Flinde… Surfing fema… F     <NA>  No in…\n3 6/10/17      2017 Unpr… USA     Flor… Ponce … Surfing Brya… M     19    Lacer…\n4 Reported 0…  2017 Unpr… UNITED… Sout… Bantha… Surfing Rich… M     30    Bruis…\n5 6/4/17       2017 Unpr… USA     Flor… Middle… Spearf… Park… M     <NA>  Lacer…\n6 6/2/17       2017 Unpr… BAHAMAS New … Athol … Snorke… Tiff… F     32    Right…\n# … with 4 more variables: `Fatal (Y/N)` <chr>, Time <chr>, Species <chr>,\n#   `original order` <dbl>, and abbreviated variable names ¹​Location, ²​Activity\n```\n:::\n:::\n\n2. Here I am filtering the data down to US only rows in or after the year 2000 to narrow down the scope of my analysis. I am also sorting by Case Number as upon reviewing the data, this is the variable that actually determines the chronological order of when these were reported. All other time and date rows are missing various data or in incomplete formats. I kept in the date column because for the rows that do have values, the formatting is pretty standardized.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsharknew %>%\n  filter(`Country` == \"USA\", `Year` >= \"2000\") %>%\n  arrange(`original order`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 963 × 15\n   Date     Year Type     Country Area  Locat…¹ Activ…² Name  Sex   Age   Injury\n   <chr>   <dbl> <chr>    <chr>   <chr> <chr>   <chr>   <chr> <chr> <chr> <chr> \n 1 6/22/05  2000 Boat     USA     Flor… Boca G… Fishin… boat… M     <NA>  No in…\n 2 2/21/00  2000 Unprovo… USA     Flor… Rivier… <NA>    male  M     27    Right…\n 3 3/1/00   2000 Unprovo… USA     Loui… Midnig… Spearf… Kurt… M     39    No in…\n 4 3/24/00  2000 Unprovo… USA     Flor… Florid… Surfing Barr… M     37    Left …\n 5 3/26/00  2000 Unprovo… USA     Flor… Juno B… Boogie… Heat… F     14    Right…\n 6 3/31/00  2000 Unprovo… USA     Flor… Santa … Fishing Dave… M     <NA>  No In…\n 7 4/9/00   2000 Unprovo… USA     Flor… Munici… Boogie… teen  M     <NA>  Punct…\n 8 4/14/00  2000 Unprovo… USA     Flor… On the… Walking Adam… M     34    Left …\n 9 6/2/00   2000 Unprovo… USA     Flor… 27th A… Snorke… Bria… M     13    Right…\n10 6/9/00   2000 Unprovo… USA     Alab… Gulf S… Swimmi… Chuc… M     44    Right…\n# … with 953 more rows, 4 more variables: `Fatal (Y/N)` <chr>, Time <chr>,\n#   Species <chr>, `original order` <dbl>, and abbreviated variable names\n#   ¹​Location, ²​Activity\n```\n:::\n:::\n\n\n3. I saw that the Location column could be used to break out counties since all values listed a description of the beach, park, etc, followed by a county after the column. This is particularly useful because I am looking at US shark attacks only and all US locations have a county associated with them. I also renamed the \"Area\" variable to \"State\" because I am looking at US.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsharknew %>%\n  filter(`Country` == \"USA\", `Year` >= \"2000\") %>%\n  arrange(`original order`) %>%\n  separate(col=`Location`, into=c(\"Description\" , \"County\"), sep = \",\") %>%\n  rename(State = `Area`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 963 × 16\n   Date     Year Type     Country State Descr…¹ County Activ…² Name  Sex   Age  \n   <chr>   <dbl> <chr>    <chr>   <chr> <chr>   <chr>  <chr>   <chr> <chr> <chr>\n 1 6/22/05  2000 Boat     USA     Flor… Boca G… \" Lee… Fishin… boat… M     <NA> \n 2 2/21/00  2000 Unprovo… USA     Flor… Rivier… \" Pal… <NA>    male  M     27   \n 3 3/1/00   2000 Unprovo… USA     Loui… Midnig…  <NA>  Spearf… Kurt… M     39   \n 4 3/24/00  2000 Unprovo… USA     Flor… Florid… \" Bre… Surfing Barr… M     37   \n 5 3/26/00  2000 Unprovo… USA     Flor… Juno B… \" Pal… Boogie… Heat… F     14   \n 6 3/31/00  2000 Unprovo… USA     Flor… Santa …  <NA>  Fishing Dave… M     <NA> \n 7 4/9/00   2000 Unprovo… USA     Flor… Munici… \" Riv… Boogie… teen  M     <NA> \n 8 4/14/00  2000 Unprovo… USA     Flor… On the… \" Vol… Walking Adam… M     34   \n 9 6/2/00   2000 Unprovo… USA     Flor… 27th A… \" New… Snorke… Bria… M     13   \n10 6/9/00   2000 Unprovo… USA     Alab… Gulf S… \" Bal… Swimmi… Chuc… M     44   \n# … with 953 more rows, 5 more variables: Injury <chr>, `Fatal (Y/N)` <chr>,\n#   Time <chr>, Species <chr>, `original order` <dbl>, and abbreviated variable\n#   names ¹​Description, ²​Activity\n```\n:::\n:::\n\n\n4. Since there isn't too much in this dataset to mutate or pivot, I thought another thing that would be interesting to recode for analysis would be granular ages into Age groups.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsharknew %>%\n  filter(`Country` == \"USA\", `Year` >= \"2000\") %>%\n  arrange(`original order`) %>%\n  separate(col=`Location`, into=c(\"Description\" , \"County\"), sep = \",\") %>%\n  rename(State = `Area`) %>%\n  mutate(`AgeRanges` = dplyr::case_when(\n    `Age` >= 18 & `Age` <= 24 ~ \"18-24\",\n    `Age` >= 25 & `Age` <= 34 ~ \"25-34\",\n    `Age` >= 35 & `Age` <= 44 ~ \"18-44\",\n    `Age` >= 45 & `Age` <= 54 ~ \"18-54\",\n    `Age` >= 55  ~ \"55+\" ))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 963 × 17\n   Date     Year Type     Country State Descr…¹ County Activ…² Name  Sex   Age  \n   <chr>   <dbl> <chr>    <chr>   <chr> <chr>   <chr>  <chr>   <chr> <chr> <chr>\n 1 6/22/05  2000 Boat     USA     Flor… Boca G… \" Lee… Fishin… boat… M     <NA> \n 2 2/21/00  2000 Unprovo… USA     Flor… Rivier… \" Pal… <NA>    male  M     27   \n 3 3/1/00   2000 Unprovo… USA     Loui… Midnig…  <NA>  Spearf… Kurt… M     39   \n 4 3/24/00  2000 Unprovo… USA     Flor… Florid… \" Bre… Surfing Barr… M     37   \n 5 3/26/00  2000 Unprovo… USA     Flor… Juno B… \" Pal… Boogie… Heat… F     14   \n 6 3/31/00  2000 Unprovo… USA     Flor… Santa …  <NA>  Fishing Dave… M     <NA> \n 7 4/9/00   2000 Unprovo… USA     Flor… Munici… \" Riv… Boogie… teen  M     <NA> \n 8 4/14/00  2000 Unprovo… USA     Flor… On the… \" Vol… Walking Adam… M     34   \n 9 6/2/00   2000 Unprovo… USA     Flor… 27th A… \" New… Snorke… Bria… M     13   \n10 6/9/00   2000 Unprovo… USA     Alab… Gulf S… \" Bal… Swimmi… Chuc… M     44   \n# … with 953 more rows, 6 more variables: Injury <chr>, `Fatal (Y/N)` <chr>,\n#   Time <chr>, Species <chr>, `original order` <dbl>, AgeRanges <chr>, and\n#   abbreviated variable names ¹​Description, ²​Activity\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsharkfinal <-  sharknew\n```\n:::\n\n\n5. Now I can plot a few things as examples of where I could start if looking to analyze patterns of shark attacks in US since 2000.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsharknew %>%\n  filter(`Country` == \"USA\", `Year` >= \"2000\") %>%\n  arrange(`original order`) %>%\n  separate(col=`Location`, into=c(\"Description\" , \"County\"), sep = \",\") %>%\n  rename(State = `Area`) %>%\n  mutate(`AgeRanges` = dplyr::case_when(\n    `Age` >= 18 & `Age` <= 24 ~ \"18-24\",\n    `Age` >= 25 & `Age` <= 34 ~ \"25-34\",\n    `Age` >= 35 & `Age` <= 44 ~ \"18-44\",\n    `Age` >= 45 & `Age` <= 54 ~ \"18-54\",\n    `Age` >= 55  ~ \"55+\" )) %>% \n  ggplot(aes(`Type`)) + geom_bar()\n```\n\n::: {.cell-output-display}\n![](HW2_abbybalint_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsharknew %>%\n  filter(`Country` == \"USA\", `Year` >= \"2000\") %>%\n  arrange(`original order`) %>%\n  separate(col=`Location`, into=c(\"Description\" , \"County\"), sep = \",\") %>%\n  rename(State = `Area`) %>%\n  mutate(`AgeRanges` = dplyr::case_when(\n    `Age` >= 18 & `Age` <= 24 ~ \"18-24\",\n    `Age` >= 25 & `Age` <= 34 ~ \"25-34\",\n    `Age` >= 35 & `Age` <= 44 ~ \"18-44\",\n    `Age` >= 45 & `Age` <= 54 ~ \"18-54\",\n    `Age` >= 55  ~ \"55+\" )) %>% \n  ggplot(aes(`Fatal (Y/N)`)) + geom_bar()\n```\n\n::: {.cell-output-display}\n![](HW2_abbybalint_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "HW2_abbybalint_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}