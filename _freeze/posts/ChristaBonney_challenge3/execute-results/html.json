{
  "hash": "7e71cc5a12a2d85ef0a5f71b5dcec097",
  "result": {
    "markdown": "---\ntitle: \"Challenge 3 - Pivoting for Tidy Data\"\nauthor: \"Christa Bonney\"\ndescription: \"Tidy Data: Pivoting\"\ndate: \"10/31/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_3\n  - animal_weights\n  - eggs\n  - australian_marriage\n  - usa_households\n  - sce_labor\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#read in dataset for eggs_tidy csv\neggs_data <- read.csv(\"~/GIT/601_Fall_2022/posts/_data/eggs_tidy.csv\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in file(file, \"rt\"): cannot open the connection\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#get dimensions of data\n\ndim(eggs_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'eggs_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#get column names\n\ncolnames(eggs_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in is.data.frame(x): object 'eggs_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#preview data to determine type\n\nhead(eggs_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(eggs_data): object 'eggs_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#get range of months and years for accrued data\ntable(select(eggs_data, \"year\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(eggs_data, \"year\"): object 'eggs_data' not found\n```\n:::\n\n```{.r .cell-code}\ntable(select(eggs_data, \"month\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(eggs_data, \"month\"): object 'eggs_data' not found\n```\n:::\n:::\n\n\nThe eggs_tidy set consists of  6 variables with 120 cases. The variables are:\n\n\"month\": qualitative ordinal, options of all 12 months from 'January' to 'December' as values\n\n\"year\": qualitative ordinal, data from years 2004 to 2013 as values\n\n\"large_half_dozen\"\n\"large_dozen\"\n\"extra_large_half_dozen\"\n\"extra_large_dozen\"\n\nthese remaining four variables have quantitative continuous values\n\nI would surmise that this data set is a log of total profit from chicken egg sales for an independent seller, totaled for each month in set years. The four variables account for 2 chicken egg sizes commonly sold, 'large' and 'extra-large', and the carton quantities chicken eggs are normally sold in, in stores, 'dozen' and 'half-dozen'. And the values for these variables are continuous, which prices would be, but chicken eggs sold in half- or whole- dozen cartons do not, generally, expand into tens or hundreds of dollars per carton, so this is likely a log of monthly sale totals. As well, one does not generally sell incomplete cartons, so it is more likely total sales profit than a total of products sold in the month.\n\nTo determine how the average price of large eggs (dozen and half-dozen) and extra-large eggs (dozen and half-dozen) changes from 2004 to 2013 I will be pivoting the data...\n\n\n## Anticipate the End Result\n\nThe eggs_tidy data set currently consists of 6 variables and 120 cases. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#there are 6 columns and 120 rows\n\n#each 'year' value is associated with 12 'month' values\n\n#pivot to get year values isolated for each egg variable\n\n#there are 10 year values (2004 - 2013), so should get 10 new columns\n\n#could not pivot_wider year column without generating NAs in new year columns\n#dropped 'month' column with subset function\nyears_data <- subset(eggs_data, select = -month)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in subset(eggs_data, select = -month): object 'eggs_data' not found\n```\n:::\n\n```{.r .cell-code}\nhead(years_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(years_data): object 'years_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#filter data sets to get monthly values for select years for each of the 4 egg variables\ndata_2004 <- filter(years_data, year == '2004')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2004\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2005 <- filter(years_data, year == '2005')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2005\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2006 <- filter(years_data, year == '2006')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2006\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2007 <- filter(years_data, year == '2007')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2007\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2008 <- filter(years_data, year == '2008')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2008\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2009 <- filter(years_data, year == '2009')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2009\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2010 <- filter(years_data, year == '2010')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2010\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2011 <- filter(years_data, year == '2011')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2011\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2012 <- filter(years_data, year == '2012')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2012\"): object 'years_data' not found\n```\n:::\n\n```{.r .cell-code}\ndata_2013 <- filter(years_data, year == '2013')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in filter(years_data, year == \"2013\"): object 'years_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#for some reason could not get individual means from year-filtered data sets, so converted to matrices, then vectors, which allowed for correct means to be calculated for 'annual average price' from monthly values\n\n#then made vectors for each variable (ex. \"large half dozen\") from calculated, filtered, year data means\n\navg_annual_prices_lg_half_doz_eggs <- c(\n  mean(c((as.matrix(select(data_2004, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2005, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2006, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2007, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2008, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2009, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2010, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2011, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2012, 'large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2013, 'large_half_dozen')))))\n)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(data_2004, \"large_half_dozen\"): object 'data_2004' not found\n```\n:::\n\n```{.r .cell-code}\navg_annual_prices_lg_doz_eggs <- c(\n  mean(c((as.matrix(select(data_2004, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2005, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2006, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2007, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2008, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2009, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2010, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2011, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2012, 'large_dozen'))))),\n  mean(c((as.matrix(select(data_2013, 'large_dozen')))))\n)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(data_2004, \"large_dozen\"): object 'data_2004' not found\n```\n:::\n\n```{.r .cell-code}\navg_annual_prices_ex_lg_half_doz_eggs <- c(\n  mean(c((as.matrix(select(data_2004, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2005, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2006, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2007, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2008, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2009, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2010, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2011, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2012, 'extra_large_half_dozen'))))),\n  mean(c((as.matrix(select(data_2013, 'extra_large_half_dozen')))))\n)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(data_2004, \"extra_large_half_dozen\"): object 'data_2004' not found\n```\n:::\n\n```{.r .cell-code}\navg_annual_prices_ex_lg_doz_eggs <- c(\n  mean(c((as.matrix(select(data_2004, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2005, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2006, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2007, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2008, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2009, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2010, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2011, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2012, 'extra_large_dozen'))))),\n  mean(c((as.matrix(select(data_2013, 'extra_large_dozen')))))\n)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(data_2004, \"extra_large_dozen\"): object 'data_2004' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(avg_annual_prices_lg_half_doz_eggs)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(avg_annual_prices_lg_half_doz_eggs): object 'avg_annual_prices_lg_half_doz_eggs' not found\n```\n:::\n\n```{.r .cell-code}\nhead(avg_annual_prices_lg_doz_eggs)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(avg_annual_prices_lg_doz_eggs): object 'avg_annual_prices_lg_doz_eggs' not found\n```\n:::\n\n```{.r .cell-code}\nhead(avg_annual_prices_ex_lg_half_doz_eggs)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(avg_annual_prices_ex_lg_half_doz_eggs): object 'avg_annual_prices_ex_lg_half_doz_eggs' not found\n```\n:::\n\n```{.r .cell-code}\nhead(avg_annual_prices_ex_lg_doz_eggs)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(avg_annual_prices_ex_lg_doz_eggs): object 'avg_annual_prices_ex_lg_doz_eggs' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#make a new years vector to use as a variable column\n\nyear <- c('2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013')\n\n#combine vectors into a new data set\n\nannual_prices <- data.frame(year, avg_annual_prices_lg_half_doz_eggs, avg_annual_prices_lg_doz_eggs, avg_annual_prices_ex_lg_half_doz_eggs, avg_annual_prices_ex_lg_doz_eggs)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in data.frame(year, avg_annual_prices_lg_half_doz_eggs, avg_annual_prices_lg_doz_eggs, : object 'avg_annual_prices_lg_half_doz_eggs' not found\n```\n:::\n\n```{.r .cell-code}\n#pivot years 4 egg columns to rows, and years to a column to see annual average price value changes for each year for each product\noptions(digits = 5)\nprint(annual_prices)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in print(annual_prices): object 'annual_prices' not found\n```\n:::\n:::\n\nWhat is displayed is a clear pattern of increasing egg prices from 2004 to 2013 for all four egg price variables.\n\nWhat is not displayed is all of the scripts that I attempted and deleted in my efforts to functionalize the data into something that I could pivot, as I kept running into errors with every method I tried or looked up to try. I do realize I am the common denominator in these script failures, though. But I ended up reaching the end result I was aiming for, in my attempts to generate pivotable data (for me). So I'm just going to do a little pivoting with the final data set I produced to show I can!\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# the annual prices data frame is composed of 5 variables and 10 rows. I am going to pivot_wider the 'year' column with the means_ldh column\n\n\n#this should displace the year and avg_annual_prices_lg_half_doz_eggs columns, and add 10 new 'year + avg annual lg_half_doz_eggs price' columns\n\n(5 - 2) + 10\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 13\n```\n:::\n\n```{.r .cell-code}\n#pivot_wider pivot_wider the 'year' column with the means_ldh column, this generates a changed annual_prices data set with 13 columns in total.\n\npivot_wider(annual_prices, names_from = 'year', values_from = 'avg_annual_prices_lg_half_doz_eggs')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in pivot_wider(annual_prices, names_from = \"year\", values_from = \"avg_annual_prices_lg_half_doz_eggs\"): object 'annual_prices' not found\n```\n:::\n:::\n\n\nThe end result of this attempt is the change from the data set only having 5 columns, to having 13 after having pivoted the 'year' and 'avg_annual_prices_lg_half_doz_eggs' columns.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}