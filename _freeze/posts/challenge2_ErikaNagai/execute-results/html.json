{
  "hash": "862b68a919ec61587da062ce3abda4ce",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2 Erika Nagai\"\nauthor: \"Erika Nagai\"\ndesription: \"Data wrangling: using group() and summarise()\"\ndate: \"09/18/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - railroads\n  - faostat\n  - hotel_bookings\n---\n\n\nFirst of all, let's install all the packages convenient for this challenge.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(summarytools)\nlibrary(dplyr)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to\n\n1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)\n2)  provide summary statistics for different interesting groups within the data, and interpret those statistics\n\n## Read in the Data\n\nRead in one (or more) of the following data sets, available in the `posts/_data` folder, using the correct R package and command.\n\n-   railroad\\*.csv or StateCounty2012.xls ⭐\n-   FAOstat\\*.csv or birds.csv ⭐⭐⭐\n-   hotel_bookings.csv ⭐⭐⭐⭐\n\nI decided to analyze \"hotel_booking.csv data\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read the data as a tibble\ndata <- read_csv(\"_data/hotel_bookings.csv\")\ndata\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 119,390 × 32\n   hotel  is_ca…¹ lead_…² arriv…³ arriv…⁴ arriv…⁵ arriv…⁶ stays…⁷ stays…⁸ adults\n   <chr>    <dbl>   <dbl>   <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>  <dbl>\n 1 Resor…       0     342    2015 July         27       1       0       0      2\n 2 Resor…       0     737    2015 July         27       1       0       0      2\n 3 Resor…       0       7    2015 July         27       1       0       1      1\n 4 Resor…       0      13    2015 July         27       1       0       1      1\n 5 Resor…       0      14    2015 July         27       1       0       2      2\n 6 Resor…       0      14    2015 July         27       1       0       2      2\n 7 Resor…       0       0    2015 July         27       1       0       2      2\n 8 Resor…       0       9    2015 July         27       1       0       2      2\n 9 Resor…       1      85    2015 July         27       1       0       3      2\n10 Resor…       1      75    2015 July         27       1       0       3      2\n# … with 119,380 more rows, 22 more variables: children <dbl>, babies <dbl>,\n#   meal <chr>, country <chr>, market_segment <chr>,\n#   distribution_channel <chr>, is_repeated_guest <dbl>,\n#   previous_cancellations <dbl>, previous_bookings_not_canceled <dbl>,\n#   reserved_room_type <chr>, assigned_room_type <chr>, booking_changes <dbl>,\n#   deposit_type <chr>, agent <chr>, company <chr>, days_in_waiting_list <dbl>,\n#   customer_type <chr>, adr <dbl>, required_car_parking_spaces <dbl>, …\n```\n:::\n:::\n\n\n## Describe the data\n\nLet's explore the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nview(dfSummary(data))\n```\n:::\n\n\nFrom this summary, we can see that this data is about reservations made for two types of hotel (City Hotel, Resort Hotel) from 2015 until 2017.\n\nThe data includes 1. Status of reservation (cancelled, checkout, no-show) 2. The length of stay (arrival date, days in total, days during weekdays and weekend), 3. Guest information (# of adults, children, babies, repeater or not, previous cancellation history) 4. Reserved service type (room type, meal, car parking, special request) 5. Others (used agency, distribution channel etc)\n\n## Provide Grouped Summary Statistics\n\nConduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.\n\nLet's explore the differences in reservation trends by the type of hotel (City Hotel vs. Resort Hotel)\n\n!! Questions: The below code shows the statistic data of only Resort Hotel.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>% \n  group_by(hotel) %>%\n  descr(stats = c(\"mean\", \"sd\", \"min\", \"med\", \"max\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDescriptive Statistics  \n\n                    adr   adults   arrival_date_day_of_month   arrival_date_week_number\n------------- --------- -------- --------------------------- --------------------------\n         Mean    105.30     1.85                       15.79                      27.18\n      Std.Dev     43.60     0.51                        8.73                      13.40\n          Min      0.00     0.00                        1.00                       1.00\n       Median     99.90     2.00                       16.00                      27.00\n          Max   5400.00     4.00                       31.00                      53.00\n\nTable: Table continues below\n\n \n\n                arrival_date_year   babies   booking_changes   children   days_in_waiting_list\n------------- ------------------- -------- ----------------- ---------- ----------------------\n         Mean             2016.17     0.00              0.19       0.09                   3.23\n      Std.Dev                0.70     0.08              0.61       0.37                  20.87\n          Min             2015.00     0.00              0.00       0.00                   0.00\n       Median             2016.00     0.00              0.00       0.00                   0.00\n          Max             2017.00    10.00             21.00       3.00                 391.00\n\nTable: Table continues below\n\n \n\n                is_canceled   is_repeated_guest   lead_time   previous_bookings_not_canceled\n------------- ------------- ------------------- ----------- --------------------------------\n         Mean          0.42                0.03      109.74                             0.13\n      Std.Dev          0.49                0.16      110.95                             1.69\n          Min          0.00                0.00        0.00                             0.00\n       Median          0.00                0.00       74.00                             0.00\n          Max          1.00                1.00      629.00                            72.00\n\nTable: Table continues below\n\n \n\n                previous_cancellations   required_car_parking_spaces   stays_in_week_nights\n------------- ------------------------ ----------------------------- ----------------------\n         Mean                     0.08                          0.02                   2.18\n      Std.Dev                     0.42                          0.15                   1.46\n          Min                     0.00                          0.00                   0.00\n       Median                     0.00                          0.00                   2.00\n          Max                    21.00                          3.00                  41.00\n\nTable: Table continues below\n\n \n\n                stays_in_weekend_nights   total_of_special_requests\n------------- ------------------------- ---------------------------\n         Mean                      0.80                        0.55\n      Std.Dev                      0.89                        0.78\n          Min                      0.00                        0.00\n       Median                      1.00                        0.00\n          Max                     16.00                        5.00\n\nGroup: hotel = Resort Hotel  \nN: 40060  \n\n                   adr   adults   arrival_date_day_of_month   arrival_date_week_number\n------------- -------- -------- --------------------------- --------------------------\n         Mean    94.95     1.87                       15.82                      27.14\n      Std.Dev    61.44     0.70                        8.88                      14.01\n          Min    -6.38     0.00                        1.00                       1.00\n       Median    75.00     2.00                       16.00                      28.00\n          Max   508.00    55.00                       31.00                      53.00\n\nTable: Table continues below\n\n \n\n                arrival_date_year   babies   booking_changes   children   days_in_waiting_list\n------------- ------------------- -------- ----------------- ---------- ----------------------\n         Mean             2016.12     0.01              0.29       0.13                   0.53\n      Std.Dev                0.72     0.12              0.73       0.45                   7.43\n          Min             2015.00     0.00              0.00       0.00                   0.00\n       Median             2016.00     0.00              0.00       0.00                   0.00\n          Max             2017.00     2.00             17.00      10.00                 185.00\n\nTable: Table continues below\n\n \n\n                is_canceled   is_repeated_guest   lead_time   previous_bookings_not_canceled\n------------- ------------- ------------------- ----------- --------------------------------\n         Mean          0.28                0.04       92.68                             0.15\n      Std.Dev          0.45                0.21       97.29                             1.00\n          Min          0.00                0.00        0.00                             0.00\n       Median          0.00                0.00       57.00                             0.00\n          Max          1.00                1.00      737.00                            30.00\n\nTable: Table continues below\n\n \n\n                previous_cancellations   required_car_parking_spaces   stays_in_week_nights\n------------- ------------------------ ----------------------------- ----------------------\n         Mean                     0.10                          0.14                   3.13\n      Std.Dev                     1.34                          0.35                   2.46\n          Min                     0.00                          0.00                   0.00\n       Median                     0.00                          0.00                   3.00\n          Max                    26.00                          8.00                  50.00\n\nTable: Table continues below\n\n \n\n                stays_in_weekend_nights   total_of_special_requests\n------------- ------------------------- ---------------------------\n         Mean                      1.19                        0.62\n      Std.Dev                      1.15                        0.81\n          Min                      0.00                        0.00\n       Median                      1.00                        0.00\n          Max                     19.00                        5.00\n```\n:::\n:::\n\n\nMake a column of total nights of stay\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>% \n  mutate(total_nights = stays_in_week_nights + stays_in_weekend_nights)\n```\n:::\n\n\nCustomer and Stay Trends by Hotel Type\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>%\n  group_by(hotel) %>%\n  summarise(\n    ave_adults = mean(adults, na.rm = TRUE),\n    ave_children = mean(children, na.rm = TRUE),\n    ave_babies = mean(babies, na.rm = TRUE),\n    avg_total_nights = mean(total_nights, nr.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 5\n  hotel        ave_adults ave_children ave_babies avg_total_nights\n  <chr>             <dbl>        <dbl>      <dbl>            <dbl>\n1 City Hotel         1.85       0.0914    0.00494             2.98\n2 Resort Hotel       1.87       0.129     0.0139              4.32\n```\n:::\n:::\n\n\nGuest who stay at Resort hotel tend to stay longer than those who stay at Resort hotel. Guests at both hotels are less likely to be accompanied by children, but resort hotels have more people with children and babies than city hotels!\n\n### Explain and Interpret\n\nI will compare **the group with children (at least one child or baby) to the group without children**. I chose this group because I thought that the presence of children on a trip significantly impacts the stay trend and that hotel companies would want to know what the groups with children want.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# First classify if the group is with at least one kid/baby.\n\ndata <- data %>% \n  mutate(Kids_total = children + babies) %>%\n  mutate(Kids = case_when(\n    Kids_total == 0 ~ \"No Kid\",\n    Kids_total >= 1 ~ \"With Kid\"\n  ))\n\ndata\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 119,390 × 35\n   hotel  is_ca…¹ lead_…² arriv…³ arriv…⁴ arriv…⁵ arriv…⁶ stays…⁷ stays…⁸ adults\n   <chr>    <dbl>   <dbl>   <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>  <dbl>\n 1 Resor…       0     342    2015 July         27       1       0       0      2\n 2 Resor…       0     737    2015 July         27       1       0       0      2\n 3 Resor…       0       7    2015 July         27       1       0       1      1\n 4 Resor…       0      13    2015 July         27       1       0       1      1\n 5 Resor…       0      14    2015 July         27       1       0       2      2\n 6 Resor…       0      14    2015 July         27       1       0       2      2\n 7 Resor…       0       0    2015 July         27       1       0       2      2\n 8 Resor…       0       9    2015 July         27       1       0       2      2\n 9 Resor…       1      85    2015 July         27       1       0       3      2\n10 Resor…       1      75    2015 July         27       1       0       3      2\n# … with 119,380 more rows, 25 more variables: children <dbl>, babies <dbl>,\n#   meal <chr>, country <chr>, market_segment <chr>,\n#   distribution_channel <chr>, is_repeated_guest <dbl>,\n#   previous_cancellations <dbl>, previous_bookings_not_canceled <dbl>,\n#   reserved_room_type <chr>, assigned_room_type <chr>, booking_changes <dbl>,\n#   deposit_type <chr>, agent <chr>, company <chr>, days_in_waiting_list <dbl>,\n#   customer_type <chr>, adr <dbl>, required_car_parking_spaces <dbl>, …\n```\n:::\n:::\n\n\nNow, let's find out the differences in trends between groups with and without children.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>%\n  group_by(Kids) %>%\n  summarise(\n    avg_total_nights = mean(total_nights, nr.rm = TRUE),\n    repeated_guest = mean(is_repeated_guest, nr.rm = TRUE),\n    lead_time = mean(lead_time, nr.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 4\n  Kids     avg_total_nights repeated_guest lead_time\n  <chr>               <dbl>          <dbl>     <dbl>\n1 No Kid               3.38         0.0337     105. \n2 With Kid             3.94         0.0103      88.5\n3 <NA>                 3            0            3  \n```\n:::\n:::\n\n\nHere are some findings\n\n-   Groups with kids tend to stay a little longer than groups without kids.\n\n-   Groups without kids are likely to book much earlier than groups with kids.\n",
    "supporting": [
      "challenge2_ErikaNagai_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}