{
  "hash": "3c67f248541b23da62636ddb106fd6c7",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Lai Wei\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"11/19/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - hotel_bookings\n  - air_bnb\n  - fed_rate\n  - debt\n  - usa_households\n  - abc_poll\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(readxl)\nlibrary(lubridate)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least one graph including time (evolution)\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n5)  Create at least one graph depicting part-whole or flow relationships\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\n  - abc_poll ⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrate <- read_csv(\"_data/abc_poll_2021.csv\")\nrate\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 527 × 31\n        id xspanish comple…¹ ppage ppeduc5 ppedu…² ppgen…³ ppethm pphhs…⁴ ppinc7\n     <dbl> <chr>    <chr>    <dbl> <chr>   <chr>   <chr>   <chr>  <chr>   <chr> \n 1 7230001 English  qualifi…    68 \"High … High s… Female  White… 2       $25,0…\n 2 7230002 English  qualifi…    85 \"Bache… Bachel… Male    White… 2       $150,…\n 3 7230003 English  qualifi…    69 \"High … High s… Male    White… 2       $100,…\n 4 7230004 English  qualifi…    74 \"Bache… Bachel… Female  White… 1       $25,0…\n 5 7230005 English  qualifi…    77 \"High … High s… Male    White… 3       $10,0…\n 6 7230006 English  qualifi…    70 \"Bache… Bachel… Male    White… 2       $75,0…\n 7 7230007 English  qualifi…    26 \"Maste… Bachel… Male    Other… 3       $150,…\n 8 7230008 English  qualifi…    76 \"Bache… Bachel… Male    Black… 2       $50,0…\n 9 7230009 English  qualifi…    78 \"Bache… Bachel… Female  White… 2       $150,…\n10 7230010 English  qualifi…    47 \"Maste… Bachel… Male    Other… 4       $150,…\n# … with 517 more rows, 21 more variables: ppmarit5 <chr>, ppmsacat <chr>,\n#   ppreg4 <chr>, pprent <chr>, ppstaten <chr>, PPWORKA <chr>, ppemploy <chr>,\n#   Q1_a <chr>, Q1_b <chr>, Q1_c <chr>, Q1_d <chr>, Q1_e <chr>, Q1_f <chr>,\n#   Q2 <chr>, Q3 <chr>, Q4 <chr>, Q5 <chr>, QPID <chr>, ABCAGE <chr>,\n#   Contact <chr>, weights_pid <dbl>, and abbreviated variable names\n#   ¹​complete_status, ²​ppeducat, ³​ppgender, ⁴​pphhsize\n```\n:::\n:::\n\n\n### Briefly describe the data\n\n## Tidy Data (as needed)\n\nGet the colnums name. \n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(rate)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"id\"              \"xspanish\"        \"complete_status\" \"ppage\"          \n [5] \"ppeduc5\"         \"ppeducat\"        \"ppgender\"        \"ppethm\"         \n [9] \"pphhsize\"        \"ppinc7\"          \"ppmarit5\"        \"ppmsacat\"       \n[13] \"ppreg4\"          \"pprent\"          \"ppstaten\"        \"PPWORKA\"        \n[17] \"ppemploy\"        \"Q1_a\"            \"Q1_b\"            \"Q1_c\"           \n[21] \"Q1_d\"            \"Q1_e\"            \"Q1_f\"            \"Q2\"             \n[25] \"Q3\"              \"Q4\"              \"Q5\"              \"QPID\"           \n[29] \"ABCAGE\"          \"Contact\"         \"weights_pid\"    \n```\n:::\n:::\n\nFrom this section, I made a new proportion table to show the demographic information, races percentage in this survey. Obviously, the White, non-Hispanic is the largest group.  \n\n::: {.cell}\n\n```{.r .cell-code}\nrate_1 <- rate %>% \n  select(xspanish, starts_with(\"pp\")) \nprop.table(table(rate_1$ppethm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n2+ Races, Non-Hispanic    Black, Non-Hispanic               Hispanic \n            0.03984820             0.05123340             0.09677419 \n   Other, Non-Hispanic    White, Non-Hispanic \n            0.04554080             0.76660342 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrate_ethm <- rate %>% \n  mutate(Ethm = ifelse(ppethm == \"White, Non-Hispanic\", \"non-ethnic minorities\", \"ethnic minorities\"))\n\nrate_ethm\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 527 × 32\n        id xspanish comple…¹ ppage ppeduc5 ppedu…² ppgen…³ ppethm pphhs…⁴ ppinc7\n     <dbl> <chr>    <chr>    <dbl> <chr>   <chr>   <chr>   <chr>  <chr>   <chr> \n 1 7230001 English  qualifi…    68 \"High … High s… Female  White… 2       $25,0…\n 2 7230002 English  qualifi…    85 \"Bache… Bachel… Male    White… 2       $150,…\n 3 7230003 English  qualifi…    69 \"High … High s… Male    White… 2       $100,…\n 4 7230004 English  qualifi…    74 \"Bache… Bachel… Female  White… 1       $25,0…\n 5 7230005 English  qualifi…    77 \"High … High s… Male    White… 3       $10,0…\n 6 7230006 English  qualifi…    70 \"Bache… Bachel… Male    White… 2       $75,0…\n 7 7230007 English  qualifi…    26 \"Maste… Bachel… Male    Other… 3       $150,…\n 8 7230008 English  qualifi…    76 \"Bache… Bachel… Male    Black… 2       $50,0…\n 9 7230009 English  qualifi…    78 \"Bache… Bachel… Female  White… 2       $150,…\n10 7230010 English  qualifi…    47 \"Maste… Bachel… Male    Other… 4       $150,…\n# … with 517 more rows, 22 more variables: ppmarit5 <chr>, ppmsacat <chr>,\n#   ppreg4 <chr>, pprent <chr>, ppstaten <chr>, PPWORKA <chr>, ppemploy <chr>,\n#   Q1_a <chr>, Q1_b <chr>, Q1_c <chr>, Q1_d <chr>, Q1_e <chr>, Q1_f <chr>,\n#   Q2 <chr>, Q3 <chr>, Q4 <chr>, Q5 <chr>, QPID <chr>, ABCAGE <chr>,\n#   Contact <chr>, weights_pid <dbl>, Ethm <chr>, and abbreviated variable\n#   names ¹​complete_status, ²​ppeducat, ³​ppgender, ⁴​pphhsize\n```\n:::\n:::\n\n\n## Time Dependent Visualization\n\nIn this section, I made a graphs by ggplot in different ages group. And we can see even though the age range is wide, the data distribution is quite similar. People's opinion do not change too much as time going by. \n\n::: {.cell}\n\n```{.r .cell-code}\nrate %>% \n  ggplot(aes(Q2)) + geom_bar() + theme_bw() + \n  facet_wrap(vars(ABCAGE), scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](challenge6_Lai_Wei_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Visualizing Part-Whole Relationships\n\nAfter adding fill section in ggplot, it shows different colors on every bar based on respondents' political tendency. \n\n::: {.cell}\n\n```{.r .cell-code}\nrate %>% \n  ggplot(aes(Q2, fill = QPID)) + geom_bar() + theme_bw() + \n  facet_wrap(vars(ABCAGE), scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](challenge6_Lai_Wei_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge6_Lai_Wei_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}