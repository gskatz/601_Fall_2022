{
  "hash": "a168ebeddcb0b5c50f9c8a1213b4d48b",
  "result": {
    "markdown": "   ---\ntitle: \"Challenge 8 Instructions\"\nauthor: \"Meredith Rolfe\"\ndescription: \"Joining Data\"\ndate: \"08/25/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_8\n  - military marriages\n\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in multiple data sets, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  join two or more data sets and analyze some aspect of the joined data\n\n\n\nI chose this dataset because it will be very similar to my final project dataset.\n\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n  - military marriages ⭐⭐\n\n::: {.cell}\n\n```{.r .cell-code}\ncols <- c(\"payGrade\",\"singleWO_Child_M\",\"singleWO_Child_F\",\"singleWO_Child_T\",\n                     \"singleW_Child_M\",\"singleW_Child_F\",\"singleW_Child_T\",\n                     \"JointService_M\",\"JointService_F\",\"JointService_T\",\n                     \"CivilianMarriage_M\",\"CivilianMarriage_F\",\"CivilianMarriage_T\",\n                    \"Total_M\",\"Total_F\",\"TotalT\")\n\nAirForce_MaritalStatus <- read_excel(\"_data/ActiveDuty_MaritalStatus.xls\",range= \"AirForce!B10:Q31\",col_names = cols)\nMarineCorps_MaritalStatus <- read_excel(\"_data/ActiveDuty_MaritalStatus.xls\",range= \"MarineCorps!B10:Q37\",col_names = cols)\nNavy_MaritalStatus <- read_excel(\"_data/ActiveDuty_MaritalStatus.xls\",range= \"Navy!B10:Q36\",col_names = cols)\nArmy_MaritalStatus <- read_excel(\"_data/ActiveDuty_MaritalStatus.xls\",range= \"Army!B10:Q37\",col_names = cols)\n\n\nhead(AirForce_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 16\n  payGrade singleWO_Ch…¹ singl…² singl…³ singl…⁴ singl…⁵ singl…⁶ Joint…⁷ Joint…⁸\n  <chr>            <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 E-1               7721    1550    9271      27       5      32      49      27\n2 E-2               4380    1010    5390      33       9      42      97     105\n3 E-3              29725    7108   36833     396     266     662    1258    1687\n4 E-4              20805    4756   25561     987     842    1829    3036    3207\n5 E-5              14623    4104   18727    2755    2171    4926    6154    5519\n6 E-6               3660    1377    5037    2446    1449    3895    3654    3263\n# … with 7 more variables: JointService_T <dbl>, CivilianMarriage_M <dbl>,\n#   CivilianMarriage_F <dbl>, CivilianMarriage_T <dbl>, Total_M <dbl>,\n#   Total_F <dbl>, TotalT <dbl>, and abbreviated variable names\n#   ¹​singleWO_Child_M, ²​singleWO_Child_F, ³​singleWO_Child_T, ⁴​singleW_Child_M,\n#   ⁵​singleW_Child_F, ⁶​singleW_Child_T, ⁷​JointService_M, ⁸​JointService_F\n```\n:::\n\n```{.r .cell-code}\nhead(MarineCorps_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 16\n  payGrade singleWO_Ch…¹ singl…² singl…³ singl…⁴ singl…⁵ singl…⁶ Joint…⁷ Joint…⁸\n  <chr>            <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 E-1               6232     583    6815      54       3      57      20      19\n2 E-2              15916    1336   17252     190      12     202      98     109\n3 E-3              34868    1864   36732     574     167     741     780     928\n4 E-4              17862    1026   18888     527     272     799    1070     944\n5 E-5               7490     590    8080     931     338    1269    1199     730\n6 E-6               2051     208    2259    1060     226    1286     568     341\n# … with 7 more variables: JointService_T <dbl>, CivilianMarriage_M <dbl>,\n#   CivilianMarriage_F <dbl>, CivilianMarriage_T <dbl>, Total_M <dbl>,\n#   Total_F <dbl>, TotalT <dbl>, and abbreviated variable names\n#   ¹​singleWO_Child_M, ²​singleWO_Child_F, ³​singleWO_Child_T, ⁴​singleW_Child_M,\n#   ⁵​singleW_Child_F, ⁶​singleW_Child_T, ⁷​JointService_M, ⁸​JointService_F\n```\n:::\n\n```{.r .cell-code}\nhead(Navy_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 16\n  payGrade singleWO_Ch…¹ singl…² singl…³ singl…⁴ singl…⁵ singl…⁶ Joint…⁷ Joint…⁸\n  <chr>            <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 E-1               7820    2275   10095     117      34     151      30      57\n2 E-2              11198    2718   13916     237      87     324     113     164\n3 E-3              28163    6396   34559     681     788    1469     861    1288\n4 E-4              23285    4266   27551     967     949    1916    1526    1691\n5 E-5              18856    3649   22505    2837    1787    4624    2191    2099\n6 E-6               5917    1429    7346    2725    1284    4009    1654    1461\n# … with 7 more variables: JointService_T <dbl>, CivilianMarriage_M <dbl>,\n#   CivilianMarriage_F <dbl>, CivilianMarriage_T <dbl>, Total_M <dbl>,\n#   Total_F <dbl>, TotalT <dbl>, and abbreviated variable names\n#   ¹​singleWO_Child_M, ²​singleWO_Child_F, ³​singleWO_Child_T, ⁴​singleW_Child_M,\n#   ⁵​singleW_Child_F, ⁶​singleW_Child_T, ⁷​JointService_M, ⁸​JointService_F\n```\n:::\n\n```{.r .cell-code}\nhead(Army_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 16\n  payGrade singleWO_Ch…¹ singl…² singl…³ singl…⁴ singl…⁵ singl…⁶ Joint…⁷ Joint…⁸\n  <chr>            <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 E-1               9456    1309   10765     365      80     445      40      38\n2 E-2              21600    3324   24924     997     167    1164     130     201\n3 E-3              38335    5651   43986    2613     699    3312     680     999\n4 E-4              50758    6333   57091    7010    2599    9609    3029    3936\n5 E-5              17020    2678   19698    4414    2280    6694    2915    2769\n6 E-6               7497    1640    9137    4138    2003    6141    2598    1896\n# … with 7 more variables: JointService_T <dbl>, CivilianMarriage_M <dbl>,\n#   CivilianMarriage_F <dbl>, CivilianMarriage_T <dbl>, Total_M <dbl>,\n#   Total_F <dbl>, TotalT <dbl>, and abbreviated variable names\n#   ¹​singleWO_Child_M, ²​singleWO_Child_F, ³​singleWO_Child_T, ⁴​singleW_Child_M,\n#   ⁵​singleW_Child_F, ⁶​singleW_Child_T, ⁷​JointService_M, ⁸​JointService_F\n```\n:::\n:::\n\n### Briefly describe the data\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to anticipate your end result to provide a sanity check, and document your work here.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#final shape:\n#cols = Pay grade, sex, Martital status\n\ntidyData <- function(inSheet){\n  # First we remove totals \n  tidySheet <- inSheet%>%\n    select(c(\"payGrade\",\"singleWO_Child_M\",\"singleWO_Child_F\",\n                     \"singleW_Child_M\",\"singleW_Child_F\",\n                     \"JointService_M\",\"JointService_F\",\n                     \"CivilianMarriage_M\",\"CivilianMarriage_F\"))%>%\n    filter(!str_detect(`payGrade`,\"TOTAL\"))\n  #could just put this in the same statement but for readability, I will separate.\n  # pivoting and fixing col names\n  pivotedSheet<-tidySheet%>%\n    pivot_longer(cols=c(\"singleWO_Child_M\",\"singleWO_Child_F\",\n                   \"singleW_Child_M\",\"singleW_Child_F\",\n                   \"JointService_M\",\"JointService_F\",\n                   \"CivilianMarriage_M\",\"CivilianMarriage_F\"), names_to = \"Marital Status\",values_to = \"Count\")%>%\n    mutate(`Marital Status`,Sex=substr(`Marital Status`,nchar(`Marital Status`),nchar(`Marital Status`)),.after=`payGrade`)%>%\n    mutate(`Marital Status`,`Marital Status`=substr(`Marital Status`,0,nchar(`Marital Status`)-2))\n  \n  inSheet <- pivotedSheet\n}\n```\n:::\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\nUsing above declared function to clean all data.\n\n::: {.cell}\n\n```{.r .cell-code}\nAirForce_MaritalStatus<- tidyData(AirForce_MaritalStatus)\nMarineCorps_MaritalStatus<- tidyData(MarineCorps_MaritalStatus)\nNavy_MaritalStatus<- tidyData(Navy_MaritalStatus)\nArmy_MaritalStatus<- tidyData(Army_MaritalStatus)\n\ncolNames<- c(\"payGrade\", \"Sex\", \"Marital Status\", \"Airforce_Count\")\ncolnames(AirForce_MaritalStatus)<-colNames\n\ncolNames<- c(\"payGrade\", \"Sex\", \"Marital Status\", \"MarineCorps_Count\")\ncolnames(MarineCorps_MaritalStatus)<-colNames\n\ncolNames<- c(\"payGrade\", \"Sex\", \"Marital Status\", \"Navy_Count\")\ncolnames(Navy_MaritalStatus)<-colNames\n\ncolNames<- c(\"payGrade\", \"Sex\", \"Marital Status\", \"Army_Count\")\ncolnames(Army_MaritalStatus)<-colNames\n\n\n\n\nhead(AirForce_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n  payGrade Sex   `Marital Status` Airforce_Count\n  <chr>    <chr> <chr>                     <dbl>\n1 E-1      M     singleWO_Child             7721\n2 E-1      F     singleWO_Child             1550\n3 E-1      M     singleW_Child                27\n4 E-1      F     singleW_Child                 5\n5 E-1      M     JointService                 49\n6 E-1      F     JointService                 27\n```\n:::\n\n```{.r .cell-code}\nhead(MarineCorps_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n  payGrade Sex   `Marital Status` MarineCorps_Count\n  <chr>    <chr> <chr>                        <dbl>\n1 E-1      M     singleWO_Child                6232\n2 E-1      F     singleWO_Child                 583\n3 E-1      M     singleW_Child                   54\n4 E-1      F     singleW_Child                    3\n5 E-1      M     JointService                    20\n6 E-1      F     JointService                    19\n```\n:::\n\n```{.r .cell-code}\nhead(Navy_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n  payGrade Sex   `Marital Status` Navy_Count\n  <chr>    <chr> <chr>                 <dbl>\n1 E-1      M     singleWO_Child         7820\n2 E-1      F     singleWO_Child         2275\n3 E-1      M     singleW_Child           117\n4 E-1      F     singleW_Child            34\n5 E-1      M     JointService             30\n6 E-1      F     JointService             57\n```\n:::\n\n```{.r .cell-code}\nhead(Army_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n  payGrade Sex   `Marital Status` Army_Count\n  <chr>    <chr> <chr>                 <dbl>\n1 E-1      M     singleWO_Child         9456\n2 E-1      F     singleWO_Child         1309\n3 E-1      M     singleW_Child           365\n4 E-1      F     singleW_Child            80\n5 E-1      M     JointService             40\n6 E-1      F     JointService             38\n```\n:::\n:::\n\n## Join Data\n\nBe sure to include a sanity check, and double-check that case count is correct!\n\nFirst I ensure each type of marital status has information. Lengths of tibbles will be different because of different amounts of pay grades, if each tot col has 4 however that means there is representation of each category.\n\n::: {.cell}\n\n```{.r .cell-code}\nAirForce_MaritalStatus%>%\n  group_by(payGrade)%>%\n  summarise(tot = n_distinct(`Marital Status`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 19 × 2\n   payGrade   tot\n   <chr>    <int>\n 1 E-1          4\n 2 E-2          4\n 3 E-3          4\n 4 E-4          4\n 5 E-5          4\n 6 E-6          4\n 7 E-7          4\n 8 E-8          4\n 9 E-9          4\n10 O-1          4\n11 O-10         4\n12 O-2          4\n13 O-3          4\n14 O-4          4\n15 O-5          4\n16 O-6          4\n17 O-7          4\n18 O-8          4\n19 O-9          4\n```\n:::\n\n```{.r .cell-code}\nMarineCorps_MaritalStatus%>%\n  group_by(`payGrade`)%>%\n  summarise(tot = n_distinct(`Marital Status`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 2\n   payGrade   tot\n   <chr>    <int>\n 1 E-1          4\n 2 E-2          4\n 3 E-3          4\n 4 E-4          4\n 5 E-5          4\n 6 E-6          4\n 7 E-7          4\n 8 E-8          4\n 9 E-9          4\n10 O-1          4\n# … with 14 more rows\n```\n:::\n\n```{.r .cell-code}\nNavy_MaritalStatus%>%\n  group_by(`payGrade`)%>%\n  summarise(tot = n_distinct(`Marital Status`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 23 × 2\n   payGrade   tot\n   <chr>    <int>\n 1 E-1          4\n 2 E-2          4\n 3 E-3          4\n 4 E-4          4\n 5 E-5          4\n 6 E-6          4\n 7 E-7          4\n 8 E-8          4\n 9 E-9          4\n10 O-1          4\n# … with 13 more rows\n```\n:::\n\n```{.r .cell-code}\nArmy_MaritalStatus%>%\n  group_by(`payGrade`)%>%\n  summarise(tot = n_distinct(`Marital Status`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 2\n   payGrade   tot\n   <chr>    <int>\n 1 E-1          4\n 2 E-2          4\n 3 E-3          4\n 4 E-4          4\n 5 E-5          4\n 6 E-6          4\n 7 E-7          4\n 8 E-8          4\n 9 E-9          4\n10 O-1          4\n# … with 14 more rows\n```\n:::\n:::\n\n\n\nNext I see how many different pay grades there are. From below we see that once all joins are done we should have at least 24 distinct pay grades.\n::: {.cell}\n\n```{.r .cell-code}\nnrow(AirForce_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 152\n```\n:::\n\n```{.r .cell-code}\nnrow(MarineCorps_MaritalStatus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 192\n```\n:::\n\n```{.r .cell-code}\nAirForce_MaritalStatus%>%\n  distinct((payGrade))%>%\n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 19\n```\n:::\n\n```{.r .cell-code}\nMarineCorps_MaritalStatus%>%\n  distinct((payGrade))%>%\n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 24\n```\n:::\n\n```{.r .cell-code}\nNavy_MaritalStatus%>%\n  distinct((payGrade))%>%\n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 23\n```\n:::\n\n```{.r .cell-code}\nArmy_MaritalStatus%>%\n  distinct((payGrade))%>%\n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 24\n```\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinalTable<-full_join(AirForce_MaritalStatus,MarineCorps_MaritalStatus,by=c(\"payGrade\"=\"payGrade\",\"Sex\"=\"Sex\",\"Marital Status\"=\"Marital Status\"))\n\nfinalTable<-full_join(finalTable,Navy_MaritalStatus,by=c(\"payGrade\"=\"payGrade\",\"Sex\"=\"Sex\",\"Marital Status\"=\"Marital Status\"))\n\nfinalTable<-full_join(finalTable,Army_MaritalStatus,by=c(\"payGrade\"=\"payGrade\",\"Sex\"=\"Sex\",\"Marital Status\"=\"Marital Status\"))\n\nfinalTable%>%\n  distinct((payGrade))%>%\n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 24\n```\n:::\n\n```{.r .cell-code}\nfinalTable%>%\n  group_by(`payGrade`)%>%\n  summarise(tot = n_distinct(`Marital Status`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 2\n   payGrade   tot\n   <chr>    <int>\n 1 E-1          4\n 2 E-2          4\n 3 E-3          4\n 4 E-4          4\n 5 E-5          4\n 6 E-6          4\n 7 E-7          4\n 8 E-8          4\n 9 E-9          4\n10 O-1          4\n# … with 14 more rows\n```\n:::\n:::\nFinal Result of joins:\n::: {.cell}\n\n```{.r .cell-code}\nhead(finalTable)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 7\n  payGrade Sex   `Marital Status` Airforce_Count MarineCorps_C…¹ Navy_…² Army_…³\n  <chr>    <chr> <chr>                     <dbl>           <dbl>   <dbl>   <dbl>\n1 E-1      M     singleWO_Child             7721            6232    7820    9456\n2 E-1      F     singleWO_Child             1550             583    2275    1309\n3 E-1      M     singleW_Child                27              54     117     365\n4 E-1      F     singleW_Child                 5               3      34      80\n5 E-1      M     JointService                 49              20      30      40\n6 E-1      F     JointService                 27              19      57      38\n# … with abbreviated variable names ¹​MarineCorps_Count, ²​Navy_Count,\n#   ³​Army_Count\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}