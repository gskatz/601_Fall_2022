{
  "hash": "d8374fef334087e45ce3c22a72c55530",
  "result": {
    "markdown": "---\ntitle: \"Challenge 8\"\nauthor: \"Siddharth Nammara Kalyana Raman\"\ndescription: \"Joining Data\"\ndate: \"12/11/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_8\n  - railroads\n  - snl\n  - faostat\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in multiple data sets, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  join two or more data sets and analyze some aspect of the joined data\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n  - military marriages ⭐⭐\n  - faostat ⭐⭐\n  - railroads  ⭐⭐⭐\n  - fed_rate ⭐⭐⭐\n  - debt ⭐⭐⭐\n  - us_hh ⭐⭐⭐⭐\n  - snl ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncodes <- read.csv(\"_data/FAOSTAT_country_groups.csv\")\ncattle <- read.csv(\"_data/FAOSTAT_cattle_dairy.csv\")\n```\n:::\n\n\n### Briefly describe the data\n\nMajorly, I'm going to use the FAO Stat Cattle dataset. This data on food and agriculture is available to the general public for more than 245 nations. Information on cow milk, including variables for units sold and product value, is specifically contained in this file. The information spans the years 1960 to 2018. There are more than 36,000 rows of data in this file.\n\nSo that we don't have to examine the data at such a detailed, individual nation level, the second file I will be integrating is a codebook that organizes the countries. To run analysis on these groups within the cattle/dairy dataset, I want to join in the country group variable.\n\n## Tidy Data (as needed)\n\nI will use the \"Area.code\" that each row's country has been given to join in the country group variable. However, the country file refers to it as \"Country Code,\" thus I am also renaming the variable to \"Country Code\" here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncattlenew <- rename (cattle, \"Country Code\"= \"Area.Code\" )\nhead(cattlenew)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Domain.Code            Domain Country Code        Area Element.Code\n1          QL Livestock Primary            2 Afghanistan         5318\n2          QL Livestock Primary            2 Afghanistan         5420\n3          QL Livestock Primary            2 Afghanistan         5510\n4          QL Livestock Primary            2 Afghanistan         5318\n5          QL Livestock Primary            2 Afghanistan         5420\n6          QL Livestock Primary            2 Afghanistan         5510\n       Element Item.Code                  Item Year.Code Year   Unit  Value\n1 Milk Animals       882 Milk, whole fresh cow      1961 1961   Head 700000\n2        Yield       882 Milk, whole fresh cow      1961 1961  hg/An   5000\n3   Production       882 Milk, whole fresh cow      1961 1961 tonnes 350000\n4 Milk Animals       882 Milk, whole fresh cow      1962 1962   Head 700000\n5        Yield       882 Milk, whole fresh cow      1962 1962  hg/An   5000\n6   Production       882 Milk, whole fresh cow      1962 1962 tonnes 350000\n  Flag Flag.Description\n1    F     FAO estimate\n2   Fc  Calculated data\n3    F     FAO estimate\n4    F     FAO estimate\n5   Fc  Calculated data\n6    F     FAO estimate\n```\n:::\n\n```{.r .cell-code}\ncodesnew <- rename (codes, \"Country Code\"= \"Country.Code\" )\nhead(cattlenew)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Domain.Code            Domain Country Code        Area Element.Code\n1          QL Livestock Primary            2 Afghanistan         5318\n2          QL Livestock Primary            2 Afghanistan         5420\n3          QL Livestock Primary            2 Afghanistan         5510\n4          QL Livestock Primary            2 Afghanistan         5318\n5          QL Livestock Primary            2 Afghanistan         5420\n6          QL Livestock Primary            2 Afghanistan         5510\n       Element Item.Code                  Item Year.Code Year   Unit  Value\n1 Milk Animals       882 Milk, whole fresh cow      1961 1961   Head 700000\n2        Yield       882 Milk, whole fresh cow      1961 1961  hg/An   5000\n3   Production       882 Milk, whole fresh cow      1961 1961 tonnes 350000\n4 Milk Animals       882 Milk, whole fresh cow      1962 1962   Head 700000\n5        Yield       882 Milk, whole fresh cow      1962 1962  hg/An   5000\n6   Production       882 Milk, whole fresh cow      1962 1962 tonnes 350000\n  Flag Flag.Description\n1    F     FAO estimate\n2   Fc  Calculated data\n3    F     FAO estimate\n4    F     FAO estimate\n5   Fc  Calculated data\n6    F     FAO estimate\n```\n:::\n:::\n\n\n\n## Join Data\n\nI'll join the two tables using left join.\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(codes)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Country.Group.Code Country.Group Country.Code      Country M49.Code ISO2.Code\n1               5100        Africa            4      Algeria       12        DZ\n2               5100        Africa            7       Angola       24        AO\n3               5100        Africa           53        Benin      204        BJ\n4               5100        Africa           20     Botswana       72        BW\n5               5100        Africa          233 Burkina Faso      854        BF\n6               5100        Africa           29      Burundi      108        BI\n  ISO3.Code\n1       DZA\n2       AGO\n3       BEN\n4       BWA\n5       BFA\n6       BDI\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncattlefinal <- left_join(cattlenew, codesnew, by = \"Country Code\" )\nhead(cattlefinal)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Domain.Code            Domain Country Code        Area Element.Code\n1          QL Livestock Primary            2 Afghanistan         5318\n2          QL Livestock Primary            2 Afghanistan         5318\n3          QL Livestock Primary            2 Afghanistan         5318\n4          QL Livestock Primary            2 Afghanistan         5318\n5          QL Livestock Primary            2 Afghanistan         5318\n6          QL Livestock Primary            2 Afghanistan         5318\n       Element Item.Code                  Item Year.Code Year Unit  Value Flag\n1 Milk Animals       882 Milk, whole fresh cow      1961 1961 Head 700000    F\n2 Milk Animals       882 Milk, whole fresh cow      1961 1961 Head 700000    F\n3 Milk Animals       882 Milk, whole fresh cow      1961 1961 Head 700000    F\n4 Milk Animals       882 Milk, whole fresh cow      1961 1961 Head 700000    F\n5 Milk Animals       882 Milk, whole fresh cow      1961 1961 Head 700000    F\n6 Milk Animals       882 Milk, whole fresh cow      1961 1961 Head 700000    F\n  Flag.Description Country.Group.Code                     Country.Group\n1     FAO estimate               5300                              Asia\n2     FAO estimate               5306    Central Asia and Southern Asia\n3     FAO estimate               5802  Land Locked Developing Countries\n4     FAO estimate               5801         Least Developed Countries\n5     FAO estimate               5858              Low income economies\n6     FAO estimate               5815 Low Income Food Deficit Countries\n      Country M49.Code ISO2.Code ISO3.Code\n1 Afghanistan        4        AF       AFG\n2 Afghanistan        4        AF       AFG\n3 Afghanistan        4        AF       AFG\n4 Afghanistan        4        AF       AFG\n5 Afghanistan        4        AF       AFG\n6 Afghanistan        4        AF       AFG\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncattlefinal %>%\n  filter(Year >= 1998) %>%\n  filter(`Flag.Description` == \"Official data\") %>%\n  filter(`Country.Group`==\"Central Asia\") %>%\n  filter(`Unit` == \"tonnes\") %>%\n  ggplot(aes(x=`Area`, y=`Value`)) + \n  geom_point(\n    color=\"red\",\n    fill=\"#69b3a2\",\n    size=.5,\n    alpha=.5\n  )+\n  labs(title = \"Official Tonnes of Milk Produced in Central Asia from the Year 2010-2018\", x=\"Country\", y=\"Milk Value\") +\n  scale_y_continuous(labels = function(x) format(x, scientific = FALSE)) \n```\n\n::: {.cell-output-display}\n![](challenge8_snammarakaly_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge8_snammarakaly_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}