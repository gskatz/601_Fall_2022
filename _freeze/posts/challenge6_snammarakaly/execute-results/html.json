{
  "hash": "c7688bf535998a7a5ebd3ee9e4029396",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Siddharth Nammara Kalyana Raman\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"12/03/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - hotel_bookings\n  - air_bnb\n  - fed_rate\n  - debt\n  - usa_households\n  - abc_poll\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(ggforce)\nlibrary(readxl)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least one graph including time (evolution)\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n5)  Create at least one graph depicting part-whole or flow relationships\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n  - debt  ⭐\n  - fed_rate ⭐⭐\n  - abc_poll ⭐⭐⭐\n  - usa_hh ⭐⭐⭐\n  - hotel_bookings ⭐⭐⭐⭐\n  - AB_NYC ⭐⭐⭐⭐⭐\n\n  \n\n\n::: {.cell}\n\n```{.r .cell-code}\nRawData <- read_excel(\"_data/debt_in_trillions.xlsx\")\nhead(RawData)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  `Year and Quarter` Mortgage `HE Revolving` Auto …¹ Credi…² Stude…³ Other Total\n  <chr>                 <dbl>          <dbl>   <dbl>   <dbl>   <dbl> <dbl> <dbl>\n1 03:Q1                  4.94          0.242   0.641   0.688   0.241 0.478  7.23\n2 03:Q2                  5.08          0.26    0.622   0.693   0.243 0.486  7.38\n3 03:Q3                  5.18          0.269   0.684   0.693   0.249 0.477  7.56\n4 03:Q4                  5.66          0.302   0.704   0.698   0.253 0.449  8.07\n5 04:Q1                  5.84          0.328   0.72    0.695   0.260 0.446  8.29\n6 04:Q2                  5.97          0.367   0.743   0.697   0.263 0.423  8.46\n# … with abbreviated variable names ¹​`Auto Loan`, ²​`Credit Card`,\n#   ³​`Student Loan`\n```\n:::\n:::\n\n\n### Briefly describe the data\n\nThe information appears to be the total amount of debt that some countries' residents, most likely those of the US have.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsplitData<- RawData %>%\n  separate(`Year and Quarter`,c('Year','Quarter'),sep = \":\")\nsplitData\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 74 × 9\n   Year  Quarter Mortgage `HE Revolving` `Auto Loan` Credi…¹ Stude…² Other Total\n   <chr> <chr>      <dbl>          <dbl>       <dbl>   <dbl>   <dbl> <dbl> <dbl>\n 1 03    Q1          4.94          0.242       0.641   0.688   0.241 0.478  7.23\n 2 03    Q2          5.08          0.26        0.622   0.693   0.243 0.486  7.38\n 3 03    Q3          5.18          0.269       0.684   0.693   0.249 0.477  7.56\n 4 03    Q4          5.66          0.302       0.704   0.698   0.253 0.449  8.07\n 5 04    Q1          5.84          0.328       0.72    0.695   0.260 0.446  8.29\n 6 04    Q2          5.97          0.367       0.743   0.697   0.263 0.423  8.46\n 7 04    Q3          6.21          0.426       0.751   0.706   0.33  0.41   8.83\n 8 04    Q4          6.36          0.468       0.728   0.717   0.346 0.423  9.04\n 9 05    Q1          6.51          0.502       0.725   0.71    0.364 0.394  9.21\n10 05    Q2          6.70          0.528       0.774   0.717   0.374 0.402  9.49\n# … with 64 more rows, and abbreviated variable names ¹​`Credit Card`,\n#   ²​`Student Loan`\n```\n:::\n:::\n\n\n## Time Dependent Visualization\n\nBelow is a time-dependent graphic of credit card debt; I later alter the data to compare it to other types of debt.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nscatter <- splitData %>%\n  ggplot(mapping=aes(x = Year, y = `Credit Card`))+ \n  geom_point(aes(color=Quarter))\nscatter\n```\n\n::: {.cell-output-display}\n![](challenge6_snammarakaly_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n# pivoting data again\n\n::: {.cell}\n\n```{.r .cell-code}\nlongerSplitData<- splitData%>%\n  pivot_longer(!c(Year,Quarter), names_to = \"DebtType\",values_to = \"DebtPercent\" )\n\nlongerSplitData\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 518 × 4\n   Year  Quarter DebtType     DebtPercent\n   <chr> <chr>   <chr>              <dbl>\n 1 03    Q1      Mortgage           4.94 \n 2 03    Q1      HE Revolving       0.242\n 3 03    Q1      Auto Loan          0.641\n 4 03    Q1      Credit Card        0.688\n 5 03    Q1      Student Loan       0.241\n 6 03    Q1      Other              0.478\n 7 03    Q1      Total              7.23 \n 8 03    Q2      Mortgage           5.08 \n 9 03    Q2      HE Revolving       0.26 \n10 03    Q2      Auto Loan          0.622\n# … with 508 more rows\n```\n:::\n:::\n\n## Visualizing Part-Whole Relationships\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlongerSplitDataPlot <- longerSplitData%>%\n  ggplot(mapping=aes(x = Year, y = DebtPercent))\n\n\nlongerSplitDataPlot +\n  facet_wrap(~DebtType, scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](challenge6_snammarakaly_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#visualize the data by debt type\n\nlongerSplitDataPlot + \n  geom_point(aes(color = DebtType))\n```\n\n::: {.cell-output-display}\n![](challenge6_snammarakaly_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nI wanted to analyze how different sorts of debt affected the total debt for that year, so I separated out the types of debt. As you can see, the mortgage debt seems to have the biggest impact on the total.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlongerSplitDataPlot+\n  geom_point() +\n  facet_wrap(~DebtType) +\n  scale_x_discrete(breaks = c('03','06','09',12,15,18,21))\n```\n\n::: {.cell-output-display}\n![](challenge6_snammarakaly_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nThe information above shows how mortgages contributed to the total debt, but what about the trends of the other types of debt? Are they similar in shape? To view this, I had to turn the scales to the free position.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlongerSplitDataPlot+\n  geom_point(aes(color = Quarter,alpha=0.9,)) +\n  facet_wrap(~DebtType, scales = \"free_y\") + \n  guides(alpha=\"none\") +\n  labs(title=\"Debt by type from '03 - '21\")+\n  scale_x_discrete(breaks = c('03','06','09',12,15,18,21))\n```\n\n::: {.cell-output-display}\n![](challenge6_snammarakaly_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge6_snammarakaly_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}