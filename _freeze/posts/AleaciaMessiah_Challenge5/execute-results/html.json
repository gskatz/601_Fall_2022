{
  "hash": "5762acc82232b954d2234b0ff2f879db",
  "result": {
    "markdown": "---\ntitle: \"Challenge 5\"\nauthor: \"Aleacia Messiah\"\ndescription: \"Introduction to Visualization\"\ndate: \"12/03/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_5\n  - Aleacia Messiah\n  - public_schools\n  - tidyverse\n  - ggplot2\n  - summarytools\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(summarytools)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least two univariate visualizations\n\n-   try to make them \"publication\" ready\n-   Explain why you choose the specific graph type\n\n5)  Create at least one bivariate visualization\n\n-   try to make them \"publication\" ready\n-   Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n-   cereal.csv ⭐\n-   Total_cost_for_top_15_pathogens_2018.xlsx ⭐\n-   Australian Marriage ⭐⭐\n-   AB_NYC_2019.csv ⭐⭐⭐\n-   StateCounty2012.xls ⭐⭐⭐\n-   Public School Characteristics ⭐⭐⭐⭐\n-   USA Households ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read in school dataset, rename columns, and skip the first row\nschool <- read_csv(\"_data/Public_School_Characteristics_2017-18.csv\",\n                   col_names = c(rep(\"delete\", 4), \"County\", \"delete\",\n                                 \"delete\", \"delete\", \"delete\", \"Agency\",\n                                 \"School\", \"Street 1\", \"Street 2\", \"Street 3\",\n                                 \"City\", \"State\", \"ZIP Code\", \"ZIP Code 2\",\n                                 \"Phone\", \"delete\", \"delete\", \"Virtual School\",\n                                 \"delete\", \"Free Lunch Program\", \"Reduced-Price Lunch Program\", \"Pre-K\", \"Kindergarten\", \"Grade 1\", \"Grade 2\", \"Grade 3\", \"Grade 4\",\n                                 \"Grade 5\", \"Grade 6\", \"Grade 7\", \"Grade 8\",\n                                 \"Grade 9\", \"Grade 10\", \"Grade 11\", \"Grade 12\",\n                                 \"Grade 13\", rep(\"delete\", 8), \"Total Teachers\",\n                                 \"Latitude\", \"Longitude\", \"Locale Code\",\n                                 \"Student/Teacher Ratio\", \"School-Wide Title 1\",\n                                 \"American Indian/Alaska Native - Male\",\n                                 \"American Indian/Alaska Native - Female\",\n                                 \"Asian/Pacific Islander - Male\",\n                                 \"Asian/Pacific Islander - Female\",\n                                 \"Hispanic - Male\", \"Hispanic - Female\",\n                                 \"Black - Male\", \"Black - Female\",\n                                 \"White - Male\", \"White - Female\",\n                                 \"Hawaiian Native/Pacific Islander - Male\",\n                                 \"Hawaiian Native/Pacific Islander - Female\",\n                                 \"Two or More Races - Male\",\n                                 \"Two or More Races - Female\",\n                                 \"delete\", \"delete\", \"delete\", \"Ungraded Students\",\n                                 \"Adult Education Students\", \"School Type\",\n                                 \"Status\", \"School Level\", \"delete\",\n                                 \"Charter School\", \"Magnet School\"), skip = 1)\n# view the first several rows of school\nhead(school)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 79\n  delete…¹ delet…² delet…³ delet…⁴ County delet…⁵ delet…⁶ delet…⁷ delet…⁸ Agency\n     <dbl>   <dbl>   <dbl> <chr>   <chr>  <chr>   <chr>   <chr>   <chr>   <chr> \n1    -149.    61.6       1 020051… Matan… 2017-2… AK      0200510 AK-33   Matan…\n2    -157.    71.3       2 020061… North… 2017-2… AK      0200610 AK-36   North…\n3    -151.    60.5       3 020039… Kenai… 2017-2… AK      0200390 AK-24   Kenai…\n4    -151.    60.6       4 020039… Kenai… 2017-2… AK      0200390 AK-24   Kenai…\n5    -151.    60.6       5 020039… Kenai… 2017-2… AK      0200390 AK-24   Kenai…\n6    -133.    56.1       6 020070… Princ… 2017-2… AK      0200700 AK-44   South…\n# … with 69 more variables: School <chr>, `Street 1` <chr>, `Street 2` <chr>,\n#   `Street 3` <lgl>, City <chr>, State <chr>, `ZIP Code` <chr>,\n#   `ZIP Code 2` <chr>, Phone <chr>, delete...20 <chr>, delete...21 <chr>,\n#   `Virtual School` <chr>, delete...23 <dbl>, `Free Lunch Program` <dbl>,\n#   `Reduced-Price Lunch Program` <dbl>, `Pre-K` <dbl>, Kindergarten <dbl>,\n#   `Grade 1` <dbl>, `Grade 2` <dbl>, `Grade 3` <dbl>, `Grade 4` <dbl>,\n#   `Grade 5` <dbl>, `Grade 6` <dbl>, `Grade 7` <dbl>, `Grade 8` <dbl>, …\n```\n:::\n:::\n\n\n### Briefly describe the data\n\nAccording to the code book for Public School Characteristics 2017-2018, this dataset contains various amounts of data ranging from point locations (latitude and longitude) to student demographics for public elementary and secondary schools included in the NCES Common Core of Data (CCD). There are 100,729 observations and 79 variables (`NCESSCH`, `SURVYEAR`, `SCH_NAME`, `PHONE`, `VIRTUAL`, etc.).\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to anticipate your end result to provide a sanity check, and document your work here.\n\n::: callout-note\n## Note\n\nI ran into issues trying to pivot longer the lunch program columns, race/ethnicity columns, and school type columns since RStudio kept giving me an error that the memory was exhausted with over 15 million observations, so I had to omit tidying those columns in order for RStudio to run correctly. The code chunks I used for pivoting those columns are commented-out.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nschool_clean <- school %>%\n  # remove columns named \"delete\"\n  select(!contains(\"delete\")) %>% \n  # combine the street, city, state, and zip code columns into one Address column\n  unite(\"Street 1\":\"ZIP Code 2\", col = \"Address\", sep = \"/\", na.rm = TRUE) %>% \n  # combine lunch program columns into one column\n  # pivot_longer(cols = \"Free Lunch Program\":\"Reduced-Price Lunch Program\", names_to = \"Lunch Program\", values_to = \"Students in Lunch Program\") %>% \n  # combine grade columns into one column\n  pivot_longer(cols = \"Pre-K\":\"Grade 13\", names_to = \"Grade\", values_to = \"Students in Grade\") %>% \n  # combine school type columns into one column\n  # pivot_longer(cols = c(\"Virtual School\", \"School Type\", \"School Level\", \"Charter School\", \"Magnet School\"), names_to = \"Type of School\", values_to = \"Value\") %>% \n  # combine race/ethnicity columns into one column\n  # pivot_longer(cols = \"American Indian/Alaska Native - Male\":\"Two or More Races - Female\", names_to = \"Race/Ethnicity\", values_to = \"Students with Race/Ethnicity\")\n  # replace certain values with NA\n  na_if(\"-1\") %>% \n  na_if(\"M\") %>% \n  na_if(\"-2\") %>% \n  na_if(\"N\") %>% \n  na_if(\"-9\")\n# view school_clean dataset\nschool_clean\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,510,935 × 37\n   County    Agency School Address Phone Virtu…¹ Free …² Reduc…³ Total…⁴ Latit…⁵\n   <chr>     <chr>  <chr>  <chr>   <chr> <chr>     <dbl>   <dbl>   <dbl>   <dbl>\n 1 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 2 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 3 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 4 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 5 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 6 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 7 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 8 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n 9 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n10 Matanusk… Matan… John … 3750 E… (907… Not a …     158      25    24.9    61.6\n# … with 1,510,925 more rows, 27 more variables: Longitude <dbl>,\n#   `Locale Code` <chr>, `Student/Teacher Ratio` <dbl>,\n#   `School-Wide Title 1` <chr>, `American Indian/Alaska Native - Male` <dbl>,\n#   `American Indian/Alaska Native - Female` <dbl>,\n#   `Asian/Pacific Islander - Male` <dbl>,\n#   `Asian/Pacific Islander - Female` <dbl>, `Hispanic - Male` <dbl>,\n#   `Hispanic - Female` <dbl>, `Black - Male` <dbl>, `Black - Female` <dbl>, …\n```\n:::\n:::\n\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# change Status to a factor\nschool_clean$Status <- factor(school_clean$Status)\n# change Grade to a factor\nschool_clean$Grade <- factor(school_clean$Grade, levels = c(\"Pre-K\", \"Kindergarten\", \"Grade 1\", \"Grade 2\", \"Grade 3\", \"Grade 4\", \"Grade 5\", \"Grade 6\", \"Grade 7\", \"Grade 8\", \"Grade 9\", \"Grade 10\", \"Grade 11\", \"Grade 12\", \"Grade 13\"))\n```\n:::\n\n\n## Univariate Visualizations\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create a bar graph based on School Level\nggplot(school, aes(`School Level`, fill = `School Level`)) +\n  geom_bar(na.rm = TRUE) +\n  guides(x = guide_axis(n.dodge = 2))\n```\n\n::: {.cell-output-display}\n![](AleaciaMessiah_Challenge5_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# create a histogram based on Total Teachers\nggplot(school, aes(`Total Teachers`)) +\n  geom_histogram(na.rm = TRUE)\n```\n\n::: {.cell-output-display}\n![](AleaciaMessiah_Challenge5_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n\n\nI chose a bar graph for `School Level` because this variable is discrete and can represent the different counts for each school level the best, in which Elementary schools have the highest count followed by High, Middle, and Not Reported. I created a histogram for `Total Teachers` because this variable is continuous unlike `School Level` and a histogram best portrays the distribution of teachers in total, where the vast majority of schools have a total number of teachers in the 25-50 range. \n\n## Bivariate Visualization(s)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create a scatterplot with Students in Grade against Grade\nggplot(school_clean, aes(Grade, `Students in Grade`, color = Grade)) +\n  geom_point(na.rm = TRUE) +\n  guides(x = guide_axis(n.dodge = 2))\n```\n\n::: {.cell-output-display}\n![](AleaciaMessiah_Challenge5_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nI chose a scatterplot with `Students in Grade` against `Grade` because these two variables (one categorical and one numerical) with a legend indicating which colors are assigned with each grade are best visualized with a scatterplot. It appears that there are quite a few students in Grade 9 followed by Grade 12, Pre-K, and Grade 10.",
    "supporting": [
      "AleaciaMessiah_Challenge5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}