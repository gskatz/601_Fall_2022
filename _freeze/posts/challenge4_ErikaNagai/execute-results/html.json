{
  "hash": "c79b502ea201d07a2c5b7fb9697599ac",
  "result": {
    "markdown": "---\ntitle: \"Challenge 4 Erika Nagai\"\nauthor: \"Meredith Rolfe\"\ndesription: \"More data wrangling: pivoting\"\ndate: \"10/4/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_4\n  - abc_poll\n  - eggs\n  - fed_rates\n  - hotel_bookings\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# install useful libraries\nlibrary(tidyverse)\nlibrary(stringr)\nlibrary(tidyr)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(summarytools)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  identify variables that need to be mutated\n4)  mutate variables and sanity check all mutations\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n-   abc_poll.csv ⭐\n-   poultry_tidy.xlsx or organiceggpoultry.xls⭐⭐\n-   FedFundsRate.csv⭐⭐⭐\n-   hotel_bookings.csv⭐⭐⭐⭐\n-   debt_in_trillions.xlsx ⭐⭐⭐⭐⭐\n\nThis time, let's use the \"debt_intrillions.csv\"\n\n## Delete \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\ndata <- read_excel(\"_data/debt_in_trillions.xlsx\")\nhead(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 8\n  `Year and Quarter` Mortgage `HE Revolving` Auto …¹ Credi…² Stude…³ Other Total\n  <chr>                 <dbl>          <dbl>   <dbl>   <dbl>   <dbl> <dbl> <dbl>\n1 03:Q1                  4.94          0.242   0.641   0.688   0.241 0.478  7.23\n2 03:Q2                  5.08          0.26    0.622   0.693   0.243 0.486  7.38\n3 03:Q3                  5.18          0.269   0.684   0.693   0.249 0.477  7.56\n4 03:Q4                  5.66          0.302   0.704   0.698   0.253 0.449  8.07\n5 04:Q1                  5.84          0.328   0.72    0.695   0.260 0.446  8.29\n6 04:Q2                  5.97          0.367   0.743   0.697   0.263 0.423  8.46\n# … with abbreviated variable names ¹​`Auto Loan`, ²​`Credit Card`,\n#   ³​`Student Loan`\n```\n:::\n:::\n\n\n### Briefly describe the data\n\nThe excel workbook \"debt_in_trillions\" shows the amount of debt by category (mortgage, HE Revolving, Auto Loan, Credit Card, Student Loan, other, and total) for each quarter from 2003 until 2021 Q2.\nThis workbook doesn't indicate but considering its huge amount we can guess that this data is information of debt amount of a country or some regions (definitely not individual or one organization).\n\n\nThis dataset consists of 8 columns and 74 lines.\nThe following is the name of the columns.\n\nExamining the excel worksheet exposes a number of important aspects of the data.\n* First column includes the last 2 digits of year and quarter\n* The value in eighth column is the sum of the values in second column through seventh column\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [74 × 8] (S3: tbl_df/tbl/data.frame)\n $ Year and Quarter: chr [1:74] \"03:Q1\" \"03:Q2\" \"03:Q3\" \"03:Q4\" ...\n $ Mortgage        : num [1:74] 4.94 5.08 5.18 5.66 5.84 ...\n $ HE Revolving    : num [1:74] 0.242 0.26 0.269 0.302 0.328 0.367 0.426 0.468 0.502 0.528 ...\n $ Auto Loan       : num [1:74] 0.641 0.622 0.684 0.704 0.72 0.743 0.751 0.728 0.725 0.774 ...\n $ Credit Card     : num [1:74] 0.688 0.693 0.693 0.698 0.695 0.697 0.706 0.717 0.71 0.717 ...\n $ Student Loan    : num [1:74] 0.241 0.243 0.249 0.253 0.26 ...\n $ Other           : num [1:74] 0.478 0.486 0.477 0.449 0.447 ...\n $ Total           : num [1:74] 7.23 7.38 7.56 8.07 8.29 ...\n```\n:::\n:::\n\n\nThis is the overview of the dataset.\n\n::: {.cell}\n\n```{.r .cell-code}\nview(dfSummary(data))\n```\n:::\n\n\n\n## Make data tidy\n\n1. Let's create a column with information only for the year and the quarter each.\nThe current \"Year and Quarter\" column has both year and quarter information. We will need to separate this column into two different columns.\n\nAlso, the year values in \"Year and Quarter\" column are character and only the last two digits of the year so they should be converted to numeric values and then added 2000.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata1 <- data %>%\n  separate(`Year and Quarter`, c(\"Year\", \"Quarter\"), sep=\":\", remove = FALSE)\n\ndata1$Year <- as.integer(data1$Year) + 2000\n```\n:::\n\n\n2. Make this dataset longer\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_long <- data1 %>%\n  pivot_longer(\n    cols = Mortgage:Total,\n    names_to = \"type of debt\",\n    values_to = \"amount\"\n  )\n```\n:::\n\n\n\n## Data visualization\n\nIn order to visualize the amount change every year, let's summarize the data by year.\n\n### You cannot sum the debt amount, it should be average\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Creating a data calculated by year\ndata_year <- data1 %>%\n  group_by(Year)  %>%\n  summarise_at (vars(Mortgage:Other), list(mean)) \n  \nhead(data_year)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 7\n   Year Mortgage `HE Revolving` `Auto Loan` `Credit Card` `Student Loan` Other\n  <dbl>    <dbl>          <dbl>       <dbl>         <dbl>          <dbl> <dbl>\n1  2003     5.22          0.268       0.663         0.693          0.246 0.472\n2  2004     6.09          0.397       0.736         0.704          0.300 0.426\n3  2005     6.80          0.534       0.780         0.724          0.377 0.404\n4  2006     7.87          0.595       0.806         0.746          0.450 0.422\n5  2007     8.79          0.626       0.808         0.804          0.524 0.412\n6  2008     9.26          0.685       0.804         0.853          0.604 0.410\n```\n:::\n:::\n\n\nAny additional comments?\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data_year, aes(Year)) + \n  geom_line(aes(y=Mortgage, color=\"Mortgage\")) +\n  geom_line(aes(y= `HE Revolving`, color=\"HE_Revolving\")) +\n  geom_line(aes(y= `Auto Loan`, color=\"Auto_Loan\")) +\n  geom_line(aes(y= `Credit Card`, color=\"Credit Card\")) +\n  geom_line(aes(y= `Student Loan`, color=\"Student Loan\"))\n```\n\n::: {.cell-output-display}\n![](challenge4_ErikaNagai_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\nThis graph tells that\n* Mortgage always accounts for the majority of debt.\n* All types of debt are on the rise except HE_Revolving.\n* Mortgage debt has decreased significantly in 2013.\n\nPlease note that the data of 2021 includes only two quarters.",
    "supporting": [
      "challenge4_ErikaNagai_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}