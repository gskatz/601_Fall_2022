{
  "hash": "a3ef5b7607274b05e3ad5b4e0dd526af",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2 Solution\"\nauthor: \"Ryan O'Donnell\"\ndesription: \"Data wrangling: using group() and summarise()\"\ndate: \"09/20/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - railroads\n  - faostat\n  - hotel_bookings\n  - ryan_odonnell\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to\n\n1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)\n2)  provide summary statistics for different interesting groups within the data, and interpret those statistics\n\n## Read in the Data\n\nRead in one (or more) of the following data sets, available in the `posts/_data` folder, using the correct R package and command.\n\n-   railroad\\*.csv or StateCounty2012.xls ⭐\n-   FAOstat\\*.csv or birds.csv ⭐⭐⭐\n-   hotel_bookings.csv ⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read in data and set up initial objects\n\nbookings <- read_csv(\"_data/hotel_bookings.csv\")\n```\n:::\n\n\nAdd any comments or documentation as needed. More challenging data may require additional code chunks and documentation.\n\n## Describe the data\n\nUsing a combination of words and results of R commands, can you provide a high level description of the data? Describe as efficiently as possible where/how the data was (likely) gathered, indicate the cases and variables (both the interpretation and any details you deem useful to the reader to fully understand your chosen data).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(bookings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nspc_tbl_ [119,390 × 32] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ hotel                         : chr [1:119390] \"Resort Hotel\" \"Resort Hotel\" \"Resort Hotel\" \"Resort Hotel\" ...\n $ is_canceled                   : num [1:119390] 0 0 0 0 0 0 0 0 1 1 ...\n $ lead_time                     : num [1:119390] 342 737 7 13 14 14 0 9 85 75 ...\n $ arrival_date_year             : num [1:119390] 2015 2015 2015 2015 2015 ...\n $ arrival_date_month            : chr [1:119390] \"July\" \"July\" \"July\" \"July\" ...\n $ arrival_date_week_number      : num [1:119390] 27 27 27 27 27 27 27 27 27 27 ...\n $ arrival_date_day_of_month     : num [1:119390] 1 1 1 1 1 1 1 1 1 1 ...\n $ stays_in_weekend_nights       : num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ stays_in_week_nights          : num [1:119390] 0 0 1 1 2 2 2 2 3 3 ...\n $ adults                        : num [1:119390] 2 2 1 1 2 2 2 2 2 2 ...\n $ children                      : num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ babies                        : num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ meal                          : chr [1:119390] \"BB\" \"BB\" \"BB\" \"BB\" ...\n $ country                       : chr [1:119390] \"PRT\" \"PRT\" \"GBR\" \"GBR\" ...\n $ market_segment                : chr [1:119390] \"Direct\" \"Direct\" \"Direct\" \"Corporate\" ...\n $ distribution_channel          : chr [1:119390] \"Direct\" \"Direct\" \"Direct\" \"Corporate\" ...\n $ is_repeated_guest             : num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ previous_cancellations        : num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ previous_bookings_not_canceled: num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ reserved_room_type            : chr [1:119390] \"C\" \"C\" \"A\" \"A\" ...\n $ assigned_room_type            : chr [1:119390] \"C\" \"C\" \"C\" \"A\" ...\n $ booking_changes               : num [1:119390] 3 4 0 0 0 0 0 0 0 0 ...\n $ deposit_type                  : chr [1:119390] \"No Deposit\" \"No Deposit\" \"No Deposit\" \"No Deposit\" ...\n $ agent                         : chr [1:119390] \"NULL\" \"NULL\" \"NULL\" \"304\" ...\n $ company                       : chr [1:119390] \"NULL\" \"NULL\" \"NULL\" \"NULL\" ...\n $ days_in_waiting_list          : num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ customer_type                 : chr [1:119390] \"Transient\" \"Transient\" \"Transient\" \"Transient\" ...\n $ adr                           : num [1:119390] 0 0 75 75 98 ...\n $ required_car_parking_spaces   : num [1:119390] 0 0 0 0 0 0 0 0 0 0 ...\n $ total_of_special_requests     : num [1:119390] 0 0 0 0 1 1 0 1 1 0 ...\n $ reservation_status            : chr [1:119390] \"Check-Out\" \"Check-Out\" \"Check-Out\" \"Check-Out\" ...\n $ reservation_status_date       : Date[1:119390], format: \"2015-07-01\" \"2015-07-01\" ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   hotel = col_character(),\n  ..   is_canceled = col_double(),\n  ..   lead_time = col_double(),\n  ..   arrival_date_year = col_double(),\n  ..   arrival_date_month = col_character(),\n  ..   arrival_date_week_number = col_double(),\n  ..   arrival_date_day_of_month = col_double(),\n  ..   stays_in_weekend_nights = col_double(),\n  ..   stays_in_week_nights = col_double(),\n  ..   adults = col_double(),\n  ..   children = col_double(),\n  ..   babies = col_double(),\n  ..   meal = col_character(),\n  ..   country = col_character(),\n  ..   market_segment = col_character(),\n  ..   distribution_channel = col_character(),\n  ..   is_repeated_guest = col_double(),\n  ..   previous_cancellations = col_double(),\n  ..   previous_bookings_not_canceled = col_double(),\n  ..   reserved_room_type = col_character(),\n  ..   assigned_room_type = col_character(),\n  ..   booking_changes = col_double(),\n  ..   deposit_type = col_character(),\n  ..   agent = col_character(),\n  ..   company = col_character(),\n  ..   days_in_waiting_list = col_double(),\n  ..   customer_type = col_character(),\n  ..   adr = col_double(),\n  ..   required_car_parking_spaces = col_double(),\n  ..   total_of_special_requests = col_double(),\n  ..   reservation_status = col_character(),\n  ..   reservation_status_date = col_date(format = \"\")\n  .. )\n - attr(*, \"problems\")=<externalptr> \n```\n:::\n:::\n\n\n\"hotel_bookings.csv\" contains 119,390 observations of 32 variables. The data appears to be tracking the details of reservations at some hotels. There is a lot of information recorded for each reservation. The arrival date is stored across 3 columns, 4 if you count the week number. Some of the columns have codes in them but there is not a key to fully understand these codes.\n\n## Provide Grouped Summary Statistics\n\nConduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# filter out cancelation and create object that is grouped by hotel\n\nby_hotel_no_cancel <- bookings %>% filter(`is_canceled` == 0) %>% group_by(`hotel`)\n\n# summarize adults, children, and babies for each hotel\nsummarize(by_hotel_no_cancel, \"Avg Adults\"=mean(adults), \"Med Adults\"=median(adults), \"Avg Children\"=mean(children), \"Med Children\"=median(children), \"Avg Babies\"=mean(babies), \"Med Babies\"=median(babies))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 7\n  hotel        `Avg Adults` `Med Adults` `Avg Children` Med Ch…¹ Avg B…² Med B…³\n  <chr>               <dbl>        <dbl>          <dbl>    <dbl>   <dbl>   <dbl>\n1 City Hotel           1.83            2         0.0999        0 0.00710       0\n2 Resort Hotel         1.83            2         0.106         0 0.0156        0\n# … with abbreviated variable names ¹​`Med Children`, ²​`Avg Babies`,\n#   ³​`Med Babies`\n```\n:::\n\n```{.r .cell-code}\nsummarize(by_hotel_no_cancel, Adults=quantile(adults), Children=quantile(children), Babies=quantile(babies))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 4\n# Groups:   hotel [2]\n   hotel        Adults Children Babies\n   <chr>         <dbl>    <dbl>  <dbl>\n 1 City Hotel        0        0      0\n 2 City Hotel        2        0      0\n 3 City Hotel        2        0      0\n 4 City Hotel        2        0      0\n 5 City Hotel        4        3     10\n 6 Resort Hotel      0        0      0\n 7 Resort Hotel      2        0      0\n 8 Resort Hotel      2        0      0\n 9 Resort Hotel      2        0      0\n10 Resort Hotel      4        3      2\n```\n:::\n\n```{.r .cell-code}\n# create columns that includes the total stay length, % of stay that is weekend, and % of stay that is weeknight, remove stays that are 0 days\n\nstays_expanded_by_hotel <- by_hotel_no_cancel %>% select(hotel, stays_in_weekend_nights, stays_in_week_nights) %>%\n  mutate(\"Total Stay\" = `stays_in_weekend_nights` + `stays_in_week_nights`,\n         \"% Weekend\" = `stays_in_weekend_nights` / (`stays_in_weekend_nights` + `stays_in_week_nights`),\n         \"% Weeknight\" = `stays_in_week_nights` / (`stays_in_weekend_nights` + `stays_in_week_nights`)\n         ) %>%\n  filter(`Total Stay` > 0)\n\n# look at the central tendencies of stays \n\nsummarize(stays_expanded_by_hotel, \"Avg Stay\"=mean(`Total Stay`), \"Med Stay\"=median(`Total Stay`), \"Avg % Wknd\"=mean(`% Weekend`), \"Med % Wknd\"=median(`% Weekend`), \"Avg % Wknt\"=mean(`% Weeknight`), \"Med % Wknt\"=median(`% Weeknight`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 7\n  hotel        `Avg Stay` `Med Stay` `Avg % Wknd` `Med % Wknd` Avg % W…¹ Med %…²\n  <chr>             <dbl>      <dbl>        <dbl>        <dbl>     <dbl>   <dbl>\n1 City Hotel         2.94          3        0.262        0.25      0.738   0.75 \n2 Resort Hotel       4.20          3        0.259        0.286     0.741   0.714\n# … with abbreviated variable names ¹​`Avg % Wknt`, ²​`Med % Wknt`\n```\n:::\n:::\n\n\nFirst, I wondered a bit about differences between who stayed at the City Hotel and who stayed at the Resort Hotel. I filtered out canceld bookings since they didn't end up staying. At both hotels, most groups are two adults with no children or babies. Slightly more children and babies stay at the Resort Hotel over the City Hotel. It looks like sometimes bookings include no people, but at this time I don't think I have enough information about this data to understand why.\n\nI also looked at how long customers tended to stay at either hotel and whether more of their stay tends to be weekends or weeknights, but the central tendencies were pretty close for both!\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| label: explore 2\n# group by cancelation, removing customers who are not repeat customers\n\nby_canceled <- bookings %>% filter(`is_repeated_guest` > 0) %>% group_by(`is_canceled`)\n\n# See if the statistics show if people who have canceled before are more likely to have canceled their current reservation\n\nsummarize(by_canceled, \"Avg Previous Cancelations\"=mean(`previous_cancellations`), \"Avg Repeat Booking Not Canceled\"=mean(`previous_bookings_not_canceled`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 3\n  is_canceled `Avg Previous Cancelations` `Avg Repeat Booking Not Canceled`\n        <dbl>                       <dbl>                             <dbl>\n1           0                       0.335                              3.96\n2           1                       1.27                               1.38\n```\n:::\n:::\n\nOne other thing I noticed they were tracking is whether or not the customer had previous cancelations so I wanted to see if whether or not those who had canceled their reservation were more likely to have canceled previous bookings. The customers who had canceled their booking had a higher average number of previous cancelations than those who kept their reservation. I also looked at the average repeated booking not canceled to see if people who had canceled a lot of bookings were just making more bookings, but that doesn't seem to be the case.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}