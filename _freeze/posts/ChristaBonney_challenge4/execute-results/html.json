{
  "hash": "3e5b2fb15dbb52543dc4a5843e3c9473",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling: Pivoting and Mutating\"\nauthor: \"Christa Bonney\"\ndesription: \"More data wrangling: pivoting and mutating with poultry_tidy data set\"\ndate: \"11/9/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_4\n  - abc_poll\n  - eggs\n  - fed_rates\n  - hotel_bookings\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  identify variables that need to be mutated\n4)  mutate variables and sanity check all mutations\n\n## Read in data and Observations\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n-   abc_poll.csv ⭐\n-   poultry_tidy.xlsx or organiceggpoultry.xls⭐⭐\n-   FedFundsRate.csv⭐⭐⭐\n-   hotel_bookings.csv⭐⭐⭐⭐\n-   debt_in_trillions.xlsx ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read in organic_egg_poultry data\n\npoultry_data <- read_excel(\"~/GIT/601_Fall_2022/posts/_data/poultry_tidy.xlsx\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: `path` does not exist: '~/GIT/601_Fall_2022/posts/_data/poultry_tidy.xlsx'\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nview(poultry_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in view(poultry_data): object 'poultry_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#get poultry data dimensions\ndim(poultry_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'poultry_data' not found\n```\n:::\n\n```{.r .cell-code}\n#preview poultry data\ncolnames(poultry_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in is.data.frame(x): object 'poultry_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#preview poultry data\nhead(poultry_data)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(poultry_data): object 'poultry_data' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#use tables to get summary of values for 'product' and 'year' columns to get range of values\n\ntable(select(poultry_data, \"Product\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(poultry_data, \"Product\"): object 'poultry_data' not found\n```\n:::\n\n```{.r .cell-code}\ntable(select(poultry_data, \"Year\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(poultry_data, \"Year\"): object 'poultry_data' not found\n```\n:::\n:::\n\n\nThe poultry_tidy data set consists of 4 variables with 600 rows of values. The variables are:\n\n\"Product\": qualitative nominal variable consisting of a range of character values consisting of: 'B/S Breast', 'Bone-in Breast', 'Thighs', 'Whole', or 'Whole Legs'.\n\n\"Year\": this is a qualitative ordinal variable, with values ranging from 2004 - 2013. \n\n\"Month\": this is a qualitative nominal variable, with values ranging from 'January' to 'December'.\n\n\"Price_Dollar\": This is a quantitative continuous variable, with values noted to be measured in dollar amounts.\n\nLooking at the variables it can be surmised that this data set is likely a log of total sales values, tallied each month, per year (2004 - 2013) of various cuts of meat. It is likely chicken, due to widespread availability.\n\nWill utilize newly learned functions to tidy and wrangle data to better perform analysis to the goal of observing how average annual sale prices per cut of chicken change over the observed period.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#pivot wider to get separate columns for each product category \n\n#new columns = (4-2) + 5  = 7\n\n# new rows = 600/5 = 120\n\n#this will take it from 600 rows and 4 columns to \n\ncuts_price <- pivot_wider(poultry_data, names_from = \"Product\", values_from = \"Price_Dollar\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in pivot_wider(poultry_data, names_from = \"Product\", values_from = \"Price_Dollar\"): object 'poultry_data' not found\n```\n:::\n\n```{.r .cell-code}\n#sanity check with dim()\n\ndim(cuts_price)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'cuts_price' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#rearrange values in 'Year' column to re-order for 2004 to 2013 (currently 2013 - 2004)\n\n cuts_price2 <- arrange(cuts_price, select(cuts_price, \"Year\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in arrange(cuts_price, select(cuts_price, \"Year\")): object 'cuts_price' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#use view() to check changes were successful\n\n#view(cuts_price2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#replace NA values to 0.00 for Bone-in Breast and Thighs columns\ncuts_price3 <- replace_na(cuts_price2, list(\"Bone-in Breast\" = 0.00, \"Thighs\" = 0.00))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in replace_na(cuts_price2, list(`Bone-in Breast` = 0, Thighs = 0)): object 'cuts_price2' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#rename variables to be able to calculate the means\n\ncuts_price3A <- rename(cuts_price3, \"B_S_Breast\" = 'B/S Breast', \"Bone_In_Breast\" = 'Bone-in Breast', \"Whole_Legs\" = 'Whole Legs')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in rename(cuts_price3, B_S_Breast = \"B/S Breast\", Bone_In_Breast = \"Bone-in Breast\", : object 'cuts_price3' not found\n```\n:::\n\n```{.r .cell-code}\n#pivot wider 'Year' column against cuts columns to get cut values per year isolated\n\n#new columns = (7 - 6) + (5x10) = 51\n\n#new rows = 120/10 = 12\n\ncuts_price3B <- pivot_wider(cuts_price3A, names_from = \"Year\", values_from = c(\"Whole\", \"B_S_Breast\", \"Bone_In_Breast\", \"Whole_Legs\", \"Thighs\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in pivot_wider(cuts_price3A, names_from = \"Year\", values_from = c(\"Whole\", : object 'cuts_price3A' not found\n```\n:::\n\n```{.r .cell-code}\n#use dim() function to perform sanity check on cuts_price3B data frame\n\ndim(cuts_price3B)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'cuts_price3B' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#use subset to get rid of 'Month' column\n\ncuts_price4 <- subset(cuts_price3B, select = -Month)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in subset(cuts_price3B, select = -Month): object 'cuts_price3B' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#then mutate to get means per year generated into new columns per each cut\n\n#Thought to see if I could mutate multiple columns with the annual means for each cut\n\n#this did not work, the row numbers would be offset by -2 in the generated columns (dataframe originally 12 rows)\n\n#could try to replace existing columns, but seems more practical (cleaner) to construct a new dataframe from vectors of means\n\n#this string is unedited from when a retro-active column name-change was initiated after the string was deemed unusable\n\nnew <- mutate(cuts_price4, Average_Annual_Price_Whole = c(mean(cuts_price4$Whole_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2013, na.rm = TRUE)),\n      Average_Annual_Price_B/S_Breast = c(mean(cuts_price4$B/S Breast_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$B/S Breast_2013, na.rm = TRUE)),\n      Average_Annual_Price_Bone-in_Breast = c(mean(cuts_price4$Bone-in Breast_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone-in Breast_2013, na.rm = TRUE)),\n       Average_Annual_Price_Whole_Legs = c(mean(cuts_price4$Whole Legs_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole Legs_2013, na.rm = TRUE)),\n       Average_Annual_Price_Thighs = c(mean(cuts_price4$Thighs_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2013, na.rm = TRUE)))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: <text>:21:39: unexpected '='\n20:                                                    mean(cuts_price4$Whole_2013, na.rm = TRUE)),\n21:       Average_Annual_Price_B/S_Breast =\n                                          ^\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#generate annual average price per cut columns by calculating means from monthly values\n\n Average_Annual_Price_Whole <- c(mean(cuts_price4$Whole_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_2013, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mean(cuts_price4$Whole_2004, na.rm = TRUE): object 'cuts_price4' not found\n```\n:::\n\n```{.r .cell-code}\nAverage_Annual_Price_BS_Breast <- c(mean(cuts_price4$B_S_Breast_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$B_S_Breast_2013, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mean(cuts_price4$B_S_Breast_2004, na.rm = TRUE): object 'cuts_price4' not found\n```\n:::\n\n```{.r .cell-code}\n Average_Annual_Price_Bone_In_Breast <- c(mean(cuts_price4$Bone_In_Breast_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Bone_In_Breast_2013, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mean(cuts_price4$Bone_In_Breast_2004, na.rm = TRUE): object 'cuts_price4' not found\n```\n:::\n\n```{.r .cell-code}\n  Average_Annual_Price_Whole_Legs <- c(mean(cuts_price4$Whole_Legs_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Whole_Legs_2013, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mean(cuts_price4$Whole_Legs_2004, na.rm = TRUE): object 'cuts_price4' not found\n```\n:::\n\n```{.r .cell-code}\n  Average_Annual_Price_Thighs = c(mean(cuts_price4$Thighs_2004, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2005, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2006, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2007, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2008, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2009, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2010, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2011, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2012, na.rm = TRUE),\n                                                   mean(cuts_price4$Thighs_2013, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mean(cuts_price4$Thighs_2004, na.rm = TRUE): object 'cuts_price4' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#create year vector\n\nYear <- c('2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#join vectors into a data frame\n\nAverage_Annual_Sale_Prices_per_Cut_of_Chicken <- data.frame(Year, Average_Annual_Price_Whole,\n                                                            Average_Annual_Price_BS_Breast,\n                                                            Average_Annual_Price_Bone_In_Breast,\n                                                            Average_Annual_Price_Whole_Legs,\n                                                            Average_Annual_Price_Thighs)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in data.frame(Year, Average_Annual_Price_Whole, Average_Annual_Price_BS_Breast, : object 'Average_Annual_Price_Whole' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# preview Average_Annual_Sale_Prices_per_Cut_of_Chicken data frame\n\nhead(Average_Annual_Sale_Prices_per_Cut_of_Chicken)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in head(Average_Annual_Sale_Prices_per_Cut_of_Chicken): object 'Average_Annual_Sale_Prices_per_Cut_of_Chicken' not found\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#change number of decimal places to just have 2 and print data frame\noptions(digits = 3)\n\nprint(Average_Annual_Sale_Prices_per_Cut_of_Chicken)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in print(Average_Annual_Sale_Prices_per_Cut_of_Chicken): object 'Average_Annual_Sale_Prices_per_Cut_of_Chicken' not found\n```\n:::\n:::\n\n\n##Conclusions\n\nFrom the new Average_Annual_Sale_Prices_per_Cut_of_Chicken data set we see that all cuts of chicken rose in price over the 10year period from 2004 to 2013. It can be seen that 3 cuts saw a brief price decline in 2011 (Whole, B/S Breast, and Thighs) while the others remained same. 2 cuts, Bone-in Breast and Whole Legs, began at below $2.00 in 2004 and in 2005 increased over this once, to $3.90 and $2.04 respectively, and then remained the same price from 2005-2013. The greatest price increase happened with the Bone-in Breast cut, increasing for $1.95 in 2004 to $3.90 in 2005 (up to 2013).\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}